<div th:fragment="notifyFragment">

    <div class="mb-4">
        <h4><b>알림</b></h4>
    </div>

    <div th:each="notice, status : ${notices}">
        <!-- period가 1일 때 "이번 주"를 표시 -->
        <span class="d-flex mb-3" th:if="${notice.period == 1 && status.first}"><b>이번 주</b></span>

        <!-- period가 2일 때 "이번 달"을 표시 -->
        <span class="d-flex mt-3 mb-3" th:if="${notice.period == 2 && notices[status.index - 1]?.period == 1}"><b>이번 달</b></span>

        <!-- period가 3일 때 "이전 활동"을 표시 -->
        <span class="d-flex mt-3 mb-3" th:if="${notice.period == 3 && notices[status.index - 1]?.period == 2}"><b>이전 활동</b></span>

        <div class="d-flex" th:id="@{|notice-${notice.id}|}">
            <div>
                <div style="position: relative; width: 44px; height: 44px;">
                    <img th:if="${notice.requestMember.Image == null}"
                         src="/files/designImg/noneuser.png"
                         class="rounded-circle text-center"
                         style="position: absolute; top: 0; left: 0; transform: translate(50,50); width: 100%; height: 100%; object-fit: cover; margin: auto">
                    <img th:unless="${notice.requestMember.Image == null}"
                         th:src="@{|/resources/${notice.requestMember.Image.name}|}"
                         class="rounded-circle text-center"
                         style="position: absolute; top: 0; left: 0; transform: translate(50,50); width: 100%; height: 100%; object-fit: cover; margin: auto">
                </div>
            </div>
            <div th:if="${notice.type == 1}">
                <div class="d-flex">
                    <div class="ms-2" style="width: 244px">
                        <input type="hidden" th:value="${notice.requestMember.username}">
                        <span th:text="@{|${notice.requestMember.username}님이 회원님의 사진을 좋아합니다.|}"></span>
                        <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                    </div>
                    <div class="ms-2">
                        <img th:src="@{|${notice.boardMainImage}|}"
                             class="text-center"
                             style="position: relative; top: 0; left: 0; transform: translate(50,50); width: 44px; height: 44px; object-fit: cover; margin: auto">
                    </div>
                </div>
            </div>
            <div th:if="${notice.type == 2}">
                <div class="d-flex">
                    <div class="ms-2" style="width: 244px">
                        <input type="hidden" th:value="${notice.requestMember.username}">
                        <span th:text="@{|${notice.requestMember.username}님이 댓글을 남겼습니다.|}"></span>
                        <span th:utext="${notice.commentContent}"></span>
                        <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                    </div>
                    <div class="ms-2">
                        <img th:src="@{|${notice.boardMainImage}|}"
                             class="text-center"
                             style="position: relative; top: 0; left: 0; transform: translate(50,50); width: 44px; height: 44px; object-fit: cover; margin: auto">
                    </div>
                </div>
            </div>
            <div th:if="${notice.type == 3}">
                <div class="d-flex">
                    <div class="ms-2" style="width: 244px">
                        <input type="hidden" th:value="${notice.requestMember.username}">
                        <span th:text="@{|${notice.requestMember.username}님이 회원님의 댓글을 좋아합니다: |}"></span>
                        <span th:utext="@{|${notice.commentContent}|}"></span>
                        <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                    </div>
                    <div class="ms-2">
                        <img th:src="@{|${notice.boardMainImage}|}"
                             class="text-center"
                             style="position: relative; top: 0; left: 0; transform: translate(50,50); width: 44px; height: 44px; object-fit: cover; margin: auto">
                    </div>
                </div>
            </div>
            <div th:if="${notice.type == 4}">
                <div class="d-flex">
                    <div class="ms-2" style="width: 244px">
                        <input type="hidden" th:value="${notice.requestMember.username}">
                        <span th:text="@{|${notice.requestMember.username}님이 댓글을 남겼습니다.|}"></span>
                        <span th:utext="@{|${notice.recommentContent}|}"></span>
                        <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                    </div>
                    <div class="ms-2">
                        <img th:src="@{|${notice.boardMainImage}|}"
                             class="text-center"
                             style="position: relative; top: 0; left: 0; transform: translate(50,50); width: 44px; height: 44px; object-fit: cover; margin: auto">
                    </div>
                </div>
            </div>
            <div th:if="${notice.type == 5}">
                <div class="d-flex">
                    <div class="ms-2" style="width: 244px">
                        <input type="hidden" th:value="${notice.requestMember.username}">
                        <span th:text="@{|${notice.requestMember.username}님이 회원님의 댓글을 좋아합니다: |}"></span>
                        <span th:utext="@{|${notice.recommentContent}|}"></span>
                        <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                    </div>
                    <div class="ms-2">
                        <img th:src="@{|${notice.boardMainImage}|}"
                             class="text-center"
                             style="position: relative; top: 0; left: 0; transform: translate(50,50); width: 44px; height: 44px; object-fit: cover; margin: auto">
                    </div>
                </div>
            </div>
            <div th:if="${notice.type == 6}">
                <div class="d-flex">
                    <div class="ms-2" style="width: 244px">
                        <input type="hidden" th:value="${notice.requestMember.username}">
                        <span th:text="@{|${notice.requestMember.username}님이 게시글에서 회원님을 언급했습니다.|}"></span>
                        <span th:utext="@{|${notice.boardContent}|}"></span>
                        <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                    </div>
                    <div class="ms-2">
                        <img th:src="@{|${notice.boardMainImage}|}"
                             class="text-center"
                             style="position: relative; top: 0; left: 0; transform: translate(50,50); width: 44px; height: 44px; object-fit: cover; margin: auto">
                    </div>
                </div>
            </div>
            <div th:if="${notice.type == 8}">

                    <div class="d-flex">
                        <a th:href="@{'/member/page/' + ${notice.requestMember.username}}">
                        <div class="ms-2" style="width: 200px">
                            <input type="hidden" th:value="${notice.requestMember.username}" id="username">
                            <span th:if="${not notice.follow and notice.follower or notice.follow}" th:text="@{|${notice.requestMember.username}님이 회원님을 팔로우하기 시작했습니다|}"></span>
                            <span th:unless="${not notice.follow and notice.follower or notice.follow}" th:text="@{|${notice.requestMember.username}님이 팔로우를 요청했습니다.|}"></span>
                            <span th:text="@{|${notice.elapsedTime}|}" style="color: grey;"></span>
                        </div>
                        </a>
                        <div style="width: 140px" th:id="${notice.id}">
                            <div id="apply-container" th:if="${not notice.follower}" class="d-flex align-items-center">
                                <button id="apply-btn" class="ms-2 btn btn-primary text-light"
                                        style="font-size: 10px; height: 32px" onclick="clickFollowApply()">
                                    <span id="request-follow-spin" class="visually-hidden spinner-border spinner-border-sm"
                                          aria-hidden="true"></span>
                                    <span class="request-follow-text">
                                    확인
                                </span>
                                </button>
                                <button id="no-btn" class="ms-2 btn btn-outline-secondary"
                                        style="font-size: 10px; height: 32px"
                                        th:onclick="@{|clickFollowDelete(${notice.id})|}">
                                    삭제
                                </button>
                            </div>
                            <div id="follow-container" th:unless="${not notice.follower}">
                                <div th:if="${not notice.follow and notice.follower or notice.follow}">
                                    <button id="follow-btn" class="ms-2 btn w-75"
                                            th:classappend="${notice.follow}?'btn-outline-secondary':'btn-primary text-light'"
                                            style="font-size: 10px; height: 32px" onclick="clickFollow()">
                                        <span id="follow-spin" class="visually-hidden spinner-border spinner-border-sm"
                                              aria-hidden="true"></span>
                                        <span id="follow-text" th:text="${notice.follow}?'팔로잉':'팔로우'"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
    <script src="/notice/js/notice.js"> </script>
</div>