<div th:fragment="sidebarFragment" class="side_menu d-flex" id="side_menu"
     xmlns="http://www.w3.org/1999/html">


    <!-- notify canvas-->
    <div class="offcanvas offcanvas-start"
         data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasNotify">
        <div class="offcanvas-body">
            <div>
                <div th:replace="~{Layout/Notify::notifyFragment}"></div>
            </div>
        </div>
    </div>

    <!-- search canvas-->
    <div class="offcanvas offcanvas-start offCanvas_line"
         data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasSearch">
        <div th:replace="~{Layout/Search::searchFragment}"></div>
    </div>

    <div class="side_bar" id="side_bar">
        <div class="menu">
            <div class="d-flex flex-column h-100">

                <!-- logo -->
                <div class="container sm_logo logo_img">
                    <div style="box-sizing: border-box;">
                        <div style="position: relative; width: 120px; height: 35px;">
                            <a href="/main">
                                <img class="logo_layout" src="/files/designImg/Logo.png" alt="logo">
                            </a>
                        </div>
                    </div>
                </div>

                <div class="logo-svg">
                    <a href="/main" class="item d-flex menu_list img">
                        <div class="btn_side_menu p-0 menu_list_text">
                            <svg aria-label="Instagram" fill="currentColor"
                                 height="24" role="img" viewBox="0 0 24 24" width="24"><title>Instagram</title>
                                <path d="M12 2.982c2.937 0 3.285.011 4.445.064a6.087 6.087 0 0 1 2.042.379 3.408 3.408 0 0 1 1.265.823 3.408 3.408 0 0 1 .823 1.265 6.087 6.087 0 0 1 .379 2.042c.053 1.16.064 1.508.064 4.445s-.011 3.285-.064 4.445a6.087 6.087 0 0 1-.379 2.042 3.643 3.643 0 0 1-2.088 2.088 6.087 6.087 0 0 1-2.042.379c-1.16.053-1.508.064-4.445.064s-3.285-.011-4.445-.064a6.087 6.087 0 0 1-2.043-.379 3.408 3.408 0 0 1-1.264-.823 3.408 3.408 0 0 1-.823-1.265 6.087 6.087 0 0 1-.379-2.042c-.053-1.16-.064-1.508-.064-4.445s.011-3.285.064-4.445a6.087 6.087 0 0 1 .379-2.042 3.408 3.408 0 0 1 .823-1.265 3.408 3.408 0 0 1 1.265-.823 6.087 6.087 0 0 1 2.042-.379c1.16-.053 1.508-.064 4.445-.064M12 1c-2.987 0-3.362.013-4.535.066a8.074 8.074 0 0 0-2.67.511 5.392 5.392 0 0 0-1.949 1.27 5.392 5.392 0 0 0-1.269 1.948 8.074 8.074 0 0 0-.51 2.67C1.012 8.638 1 9.013 1 12s.013 3.362.066 4.535a8.074 8.074 0 0 0 .511 2.67 5.392 5.392 0 0 0 1.27 1.949 5.392 5.392 0 0 0 1.948 1.269 8.074 8.074 0 0 0 2.67.51C8.638 22.988 9.013 23 12 23s3.362-.013 4.535-.066a8.074 8.074 0 0 0 2.67-.511 5.625 5.625 0 0 0 3.218-3.218 8.074 8.074 0 0 0 .51-2.67C22.988 15.362 23 14.987 23 12s-.013-3.362-.066-4.535a8.074 8.074 0 0 0-.511-2.67 5.392 5.392 0 0 0-1.27-1.949 5.392 5.392 0 0 0-1.948-1.269 8.074 8.074 0 0 0-2.67-.51C15.362 1.012 14.987 1 12 1Zm0 5.351A5.649 5.649 0 1 0 17.649 12 5.649 5.649 0 0 0 12 6.351Zm0 9.316A3.667 3.667 0 1 1 15.667 12 3.667 3.667 0 0 1 12 15.667Zm5.872-10.859a1.32 1.32 0 1 0 1.32 1.32 1.32 1.32 0 0 0-1.32-1.32Z"></path>
                            </svg>
                        </div>
                    </a>
                </div>

                <!--sidebar menu-->
                <div class="flex-fill">
                    <ul style="padding: 0">
                        <li>
                            <a href="/main" class="item d-flex menu_list img">
                                <div class="btn_side_menu p-0 menu_list_text">
                                    <svg aria-label="홈" fill="currentColor" height="24"
                                         role="img"
                                         viewBox="0 0 24 24" width="24">
                                        <path d="M9.005 16.545a2.997 2.997 0 0 1 2.997-2.997A2.997 2.997 0 0 1 15 16.545V22h7V11.543L12 2 2 11.543V22h7.005Z"
                                              fill="none" stroke="currentColor" stroke-linejoin="round"
                                              stroke-width="2"></path>
                                    </svg>
                                    <span class="menu_list_text menu_text">홈</span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <div class="item d-flex menu_list img">
                                <label for="expand-search-menu" class="btn_side_menu p-0 menu_list_text w-100">
                                    <svg aria-label="검색" fill="currentColor" height="24"
                                         role="img"
                                         viewBox="0 0 24 24" width="24">
                                        <path d="M19 10.5A8.5 8.5 0 1 1 10.5 2a8.5 8.5 0 0 1 8.5 8.5Z" fill="none"
                                              stroke="currentColor"
                                              stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                                        <line fill="none" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2" x1="16.511" x2="22" y1="16.511" y2="22"></line>
                                    </svg>
                                    <span class="menu_list_text menu_text"> 검색 </span>
                                </label>
                            </div>
                            <input class="expand-menu" type="checkbox" id="expand-search-menu" name="expand-menu"
                                   onclick="clickSearch(this)"
                                   data-bs-toggle="offcanvas" href="#offcanvasSearch" role="button"
                                   aria-controls="offcanvasSearch">
                        </li>

                        <li>
                            <a href="/explore" class="item d-flex menu_list img">
                                <div class="btn_side_menu p-0 menu_list_text">
                                    <svg aria-label="탐색 탭" fill="currentColor" height="24"
                                         role="img"
                                         viewBox="0 0 24 24" width="24">
                                        <polygon fill="none"
                                                 points="13.941 13.953 7.581 16.424 10.06 10.056 16.42 7.585 13.941 13.953"
                                                 stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                 stroke-width="2"></polygon>
                                        <polygon fill-rule="evenodd"
                                                 points="10.06 10.056 13.949 13.945 7.581 16.424 10.06 10.056"></polygon>
                                        <circle cx="12.001" cy="12.005" fill="none" r="10.5" stroke="currentColor"
                                                stroke-linecap="round"
                                                stroke-linejoin="round" stroke-width="2"></circle>
                                    </svg>
                                    <span class="menu_list_text menu_text"> 탐색 </span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a href="/direct/inbox" class="item d-flex menu_list img">
                                <div class="btn_side_menu p-0 menu_list_text">
                                    <svg aria-label="Direct" fill="currentColor"
                                         height="24"
                                         role="img"
                                         viewBox="0 0 24 24" width="24">
                                        <line fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2"
                                              x1="22"
                                              x2="9.218"
                                              y1="3" y2="10.083"></line>
                                        <polygon fill="none"
                                                 points="11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334"
                                                 stroke="currentColor" stroke-linejoin="round"
                                                 stroke-width="2"></polygon>
                                    </svg>
                                    <span th:if="${#lists.size(noticesDMChecked) > 0}" class="bg-danger rounded-circle" style="width: 15px; height: 15px; margin-left: -10px; margin-top: -6px; color: white; font-size: 8px;">
                                        <span th:text="${#lists.size(noticesDMChecked)}" style="margin-top:1px; margin-left: -45px; font-size: 8px;"></span>
                                    </span>
                                    <span class="menu_list_text menu_text"> 메시지 </span>
                                </div>
                                <label>
                                    <input class="expand-menu" type="checkbox" id="expand-direct-menu"
                                           name="expand-menu">
                                </label>
                            </a>
                        </li>

                        <li>
                            <div class="item d-flex menu_list img">
                                <label for="expand-notify-menu" class="btn_side_menu p-0 menu_list_text w-100">
                                    <svg aria-label="알림" fill="currentColor" height="24"
                                         role="img"
                                         viewBox="0 0 24 24" width="24">
                                        <path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path>
                                    </svg>
                                    <span th:if="${#lists.size(noticesChecked) > 0}" class="bg-danger rounded-circle" style="width: 8px; height: 8px; margin-left:-10px;"></span>
                                    <span class="menu_list_text menu_text"> 알림 </span>
                                    <span id="noticePopoverSpan"></span>
                                </label>
                            </div>
                            <input class="expand-menu" type="checkbox" id="expand-notify-menu" name="expand-menu"
                                   onclick="clickNotify(this)"
                                   data-bs-toggle="offcanvas" href="#offcanvasNotify" role="button"
                                   aria-controls="offcanvasNotify">
                        </li>

                        <li>
                            <!-- Button trigger modal -->
                            <a class="item d-flex menu_list img" data-bs-toggle="modal"
                               data-bs-target="#Board_Create_Modal">
                                <div class="btn_side_menu p-0 menu_list_text">
                                    <svg fill="currentColor" height="24" role="img" viewBox="0 0 24 24" width="24">
                                        <path d="M2 12v3.45c0 2.849.698 4.005 1.606 4.944.94.909 2.098 1.608 4.946 1.608h6.896c2.848 0 4.006-.7 4.946-1.608C21.302 19.455 22 18.3 22 15.45V8.552c0-2.849-.698-4.006-1.606-4.945C19.454 2.7 18.296 2 15.448 2H8.552c-2.848 0-4.006.699-4.946 1.607C2.698 4.547 2 5.703 2 8.552Z"
                                              fill="none" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2"></path>
                                        <line fill="none" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2" x1="6.545" x2="17.455" y1="12.001" y2="12.001"></line>
                                        <line fill="none" stroke="currentColor" stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2" x1="12.003" x2="12.003" y1="6.545" y2="17.455"></line>
                                    </svg>
                                    <span class="menu_list_text menu_text">만들기</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a th:href="@{|/member/page/${loginMember.username}|}" class="item d-flex menu_list img">
                                <div class="btn_side_menu p-0 menu_list_text">
                                    <div style="position: relative; width: 1.5rem; height: 1.5rem;">
                                        <img th:if="${loginMember.Image == null}"
                                             src="/files/designImg/noneuser.png"
                                             class="rounded-circle text-center"
                                             style="position: absolute; top: 0; left: 0; transform: translate(50,50); width: 100%; height: 100%; object-fit: cover; margin: auto">
                                        <img th:unless="${loginMember.Image == null}"
                                             th:src="@{|/resources/${loginMember.Image.name}|}"
                                             class="rounded-circle text-center"
                                             style="position: absolute; top: 0; left: 0; transform: translate(50,50); width: 100%; height: 100%; object-fit: cover; margin: auto">
                                    </div>
                                    <span class="menu_list_text menu_text">프로필</span>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- dropdowns -->
                <div class="dropup">
                    <a class="item d-flex menu_list img" href="#" role="button" data-bs-toggle="dropdown"
                       aria-expanded="false">
                        <div class="btn_side_menu p-0 menu_list_text">
                            <svg aria-label="설정" fill="currentColor" height="24"
                                 role="img"
                                 viewBox="0 0 24 24" width="24">
                                <line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2" x1="3" x2="21" y1="4" y2="4"></line>
                                <line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2" x1="3" x2="21" y1="12" y2="12"></line>
                                <line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2" x1="3" x2="21" y1="20" y2="20"></line>
                            </svg>
                            <span class="menu_list_text menu_text">더 보기</span>
                        </div>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-lg drop-menu mb-3" style="z-index: 9999">
                        <li style="z-index: 9999;">
                            <a class="dropdown-item dropdown_menu_list img" href="#" style="margin-top: 0">
                                <div class="flex-fill">
                                    <svg aria-label="설정" class="x1lliihq x1n2onr6 x5n08af img" fill="currentColor"
                                         height="18"
                                         role="img" viewBox="0 0 24 24" width="18">
                                        <circle cx="12" cy="12" fill="none" r="8.635" stroke="currentColor"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                stroke-width="2"></circle>
                                        <path d="M14.232 3.656a1.269 1.269 0 0 1-.796-.66L12.93 2h-1.86l-.505.996a1.269 1.269 0 0 1-.796.66m-.001 16.688a1.269 1.269 0 0 1 .796.66l.505.996h1.862l.505-.996a1.269 1.269 0 0 1 .796-.66M3.656 9.768a1.269 1.269 0 0 1-.66.796L2 11.07v1.862l.996.505a1.269 1.269 0 0 1 .66.796m16.688-.001a1.269 1.269 0 0 1 .66-.796L22 12.93v-1.86l-.996-.505a1.269 1.269 0 0 1-.66-.796M7.678 4.522a1.269 1.269 0 0 1-1.03.096l-1.06-.348L4.27 5.587l.348 1.062a1.269 1.269 0 0 1-.096 1.03m11.8 11.799a1.269 1.269 0 0 1 1.03-.096l1.06.348 1.318-1.317-.348-1.062a1.269 1.269 0 0 1 .096-1.03m-14.956.001a1.269 1.269 0 0 1 .096 1.03l-.348 1.06 1.317 1.318 1.062-.348a1.269 1.269 0 0 1 1.03.096m11.799-11.8a1.269 1.269 0 0 1-.096-1.03l.348-1.06-1.317-1.318-1.062.348a1.269 1.269 0 0 1-1.03-.096"
                                              fill="none" stroke="currentColor" stroke-linejoin="round"
                                              stroke-width="2"></path>
                                    </svg>
                                    <span class="dropdown_list_text">
                                                설정
                                    </span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a class="dropdown-item dropdown_menu_list img" href="#">
                                <div>
                                    <svg aria-label="내 활동" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor"
                                         height="19"
                                         role="img" viewBox="0 0 24 24" width="19">
                                        <path d="M19 1H5C2.794 1 1 2.794 1 5v14c0 2.206 1.794 4 4 4h14c2.206 0 4-1.794 4-4V5c0-2.206-1.794-4-4-4ZM5 3h14c1.103 0 2 .897 2 2v6h-2.382l-2.723-5.447c-.34-.678-1.45-.678-1.79 0L9 15.764l-2.105-4.211A1 1 0 0 0 6 11H3V5c0-1.103.897-2 2-2Zm14 18H5c-1.103 0-2-.897-2-2v-6h2.382l2.723 5.447a1 1 0 0 0 1.79 0L15 8.236l2.105 4.211A1 1 0 0 0 18 13h3v6c0 1.103-.897 2-2 2Z"></path>
                                    </svg>
                                    <span class="dropdown_list_text">
                                                내 활동
                                    </span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a class="dropdown-item dropdown_menu_list img" href="#">
                                <div>
                                    <svg aria-label="저장됨" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor"
                                         height="18"
                                         role="img" viewBox="0 0 24 24" width="18"><title>저장됨</title>
                                        <polygon fill="none" points="20 21 12 13.44 4 21 4 3 20 3 20 21"
                                                 stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                                 stroke-width="2"></polygon>
                                    </svg>
                                    <span class="dropdown_list_text">
                                                저장됨
                                    </span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a class="dropdown-item dropdown_menu_list img" href="#">
                                <div>
                                    <svg aria-label="테마 아이콘" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor"
                                         height="18" role="img" viewBox="0 0 24 24" width="18"><title>테마 아이콘</title>
                                        <path d="M12.00018,4.5a1,1,0,0,0,1-1V2a1,1,0,0,0-2,0V3.5A1.00005,1.00005,0,0,0,12.00018,4.5ZM5.28241,6.69678A.99989.99989,0,1,0,6.69647,5.28271l-1.06054-1.061A.99989.99989,0,0,0,4.22186,5.63574ZM4.50018,12a1,1,0,0,0-1-1h-1.5a1,1,0,0,0,0,2h1.5A1,1,0,0,0,4.50018,12Zm.78223,5.30322-1.06055,1.061a.99989.99989,0,1,0,1.41407,1.41406l1.06054-1.061a.99989.99989,0,0,0-1.41406-1.41407ZM12.00018,19.5a1.00005,1.00005,0,0,0-1,1V22a1,1,0,0,0,2,0V20.5A1,1,0,0,0,12.00018,19.5Zm6.71729-2.19678a.99989.99989,0,0,0-1.41406,1.41407l1.06054,1.061A.99989.99989,0,0,0,19.778,18.36426ZM22.00018,11h-1.5a1,1,0,0,0,0,2h1.5a1,1,0,0,0,0-2ZM18.01044,6.98975a.996.996,0,0,0,.707-.293l1.06055-1.061A.99989.99989,0,0,0,18.364,4.22168l-1.06054,1.061a1,1,0,0,0,.707,1.707ZM12.00018,6a6,6,0,1,0,6,6A6.00657,6.00657,0,0,0,12.00018,6Zm0,10a4,4,0,1,1,4-4A4.00458,4.00458,0,0,1,12.00018,16Z"></path>
                                    </svg>
                                    <span class="dropdown_list_text">
                                                모드 전환
                                    </span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <a class="dropdown-item dropdown_menu_list img" href="#">
                                <div>
                                    <svg aria-label="문제 신고" class="x1lliihq x1n2onr6 x5n08af" fill="currentColor"
                                         height="18" role="img" viewBox="0 0 24 24" width="18"><title>문제 신고</title>
                                        <path d="M18.001 1h-12a5.006 5.006 0 0 0-5 5v9.005a5.006 5.006 0 0 0 5 5h2.514l2.789 2.712a1 1 0 0 0 1.394 0l2.787-2.712h2.516a5.006 5.006 0 0 0 5-5V6a5.006 5.006 0 0 0-5-5Zm3 14.005a3.003 3.003 0 0 1-3 3h-2.936a1 1 0 0 0-.79.387l-2.274 2.212-2.276-2.212a1 1 0 0 0-.79-.387H6a3.003 3.003 0 0 1-3-3V6a3.003 3.003 0 0 1 3-3h12a3.003 3.003 0 0 1 3 3Zm-9-1.66a1.229 1.229 0 1 0 1.228 1.228A1.23 1.23 0 0 0 12 13.344Zm0-8.117a1.274 1.274 0 0 0-.933.396 1.108 1.108 0 0 0-.3.838l.347 4.861a.892.892 0 0 0 1.77 0l.348-4.86a1.106 1.106 0 0 0-.3-.838A1.272 1.272 0 0 0 12 5.228Z"></path>
                                    </svg>
                                    <span class="dropdown_list_text">
                                                문제 신고
                                    </span>
                                </div>
                            </a>
                        </li>

                        <li>
                            <div class="dropdown_change_line"></div>
                        </li>

                        <li><a class="dropdown-item dropdown_menu_list dropdown_list_text drop_list_text"
                               style="padding-left: 15px" href="#">계정 전환</a></li>

                        <li>
                            <div class="dropdown_logout_line"></div>
                        </li>

                        <li><a href="/member/logout"
                               class="dropdown-item dropdown_menu_list dropdown_list_text drop_list_text"
                               style="padding-left: 15px; margin-bottom: 0">로그아웃
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>

        <!-- 알림 팝오버 (부트스트랩 + JQuery) -->

        var popoverInstance;

        document.addEventListener('DOMContentLoaded', function () {

            // 알람의 종류 및 개수를 판별하기 위한 fetch 비동기 통신
            // notice 엔티티의 알림타입 (enum 기반)
            var countNoticeLikeSeries = 0; // 좋아요 계열 : 1, 3, 5, 11
            var countNoticeFollowSeries = 0; // 팔로우 계열 : 7, 8
            var countNoticeTextSeries = 0; // 텍스트 계열 : 2, 4, 6

            fetch("/notice/alert")
                .then(response => response.json())
                .then(data => {
                    data.forEach(notice => {
                        switch (notice.type) {
                            case 1:
                            case 3:
                            case 5:
                            case 11:
                                countNoticeLikeSeries++;
                                break;
                            case 7:
                            case 8:
                                countNoticeFollowSeries++;
                                break;
                            case 2:
                            case 4:
                            case 6:
                                countNoticeTextSeries++;
                                break;
                        }
                    });

                    var popoverElement = document.getElementById('noticePopoverSpan');

                    popoverElement.style.marginLeft = '-85px';
                    popoverElement.style.marginTop = '12px';

                    <!-- 팝오버 알림 내용 생성 시작 -->

                    var dataContent = ''; // 팝오버 내용 초기화

                    // 좋아요 계열
                    if (countNoticeLikeSeries > 0) {
                        dataContent += '<div class="d-flex align-items-center">' +
                            '<svg aria-label="좋아요알림" fill="#FFFFFF" height="20" role="img" viewBox="0 0 24 24" width="20">' +
                            '<path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C15.09 3.81 16.76 3 18.5 3 21.58 3 24 5.42 24 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>' +
                            '</div>' +
                            '&nbsp;' + countNoticeLikeSeries + '&nbsp;';
                    }

                    // 팔로우 계열
                    if (countNoticeFollowSeries > 0) {
                        dataContent += '<div class="d-flex align-items-center">' +
                            '<svg aria-label="팔로우알림" fill="#FFFFFF" height="16" role="img" viewBox="11.8362 6.5645 1.934 2.162" width="16">' +
                            '<path d="M13.343 7.105 c 0 0.2985 -0.242 0.5405 -0.5405 0.5405 c -0.2985 0 -0.5405 -0.242 -0.5405 -0.5405 c 0 -0.2985 0.242 -0.5405 0.5405 -0.5405 C 13.101 6.565 13.343 6.8065 13.343 7.105 z M 13.548 8.7265 c 0.1575 0 0.2675 -0.1625 0.203 -0.306 c -0.163 -0.363 -0.5245 -0.616 -0.948 -0.616 c -0.424 0 -0.7855 0.253 -0.948 0.616 c -0.0645 0.144 0.0455 0.306 0.203 0.306 H 13.548 z"</path></svg>' +
                            '</div>' +
                            '&nbsp;' + countNoticeFollowSeries + '&nbsp;';
                    }

                    // 텍스트 계열
                    if (countNoticeTextSeries > 0) {
                        dataContent += '<div class="d-flex align-items-center">' +
                            '<svg aria-label="텍스트알림" fill="#FFFFFF" height="18" role="img" viewBox="11.1701 3.92919 1.297 1.297" width="18">' +
                            '<path d="M12.3525 4.9443 c 0.0855 -0.1239 0.1293 -0.2787 0.1098 -0.4446 c -0.036 -0.3066 -0.2922 -0.549 -0.6003 -0.5691 c -0.3921 -0.0255 -0.7155 0.2976 -0.6906 0.6894 c 0.0186 0.2913 0.2853 0.5709 0.5754 0.6021 c 0.1455 0.0156 0.2826 -0.0171 0.3975 -0.084 c 0.0198 -0.0114 0.0528 -0.0111 0.0729 -0.0003 c 0.0408 0.0216 0.1056 0.0558 0.1533 0.081 c 0.0216 0.0114 0.0456 -0.0099 0.0372 -0.0327 c -0.0201 -0.0531 -0.048 -0.1266 -0.0648 -0.1704 C 12.3336 4.9914 12.3381 4.9653 12.3525 4.9443 z"></path></svg>' +
                            '</div>' +
                            '&nbsp;' + countNoticeTextSeries;
                    }

                    // dataContent가 비어있지 않은 경우에만 전체 팝오버 표시
                    if (dataContent !== '') {
                        dataContent = '<div class="dataContent d-flex" style="color: #FFFFFF;">' + dataContent + '</div>';

                        popoverInstance = new bootstrap.Popover(popoverElement, {
                            placement: 'right',
                            html: true,
                            content: function () {
                                var div = document.createElement('div');
                                div.innerHTML = dataContent;
                                return div;
                            }
                        });

                        popoverInstance.show();

                        // 팝오버의 DOM 요소에 직접 스타일 적용 (.tip을 사용하면 팝오버의 실제 DOM 요소에 직접 접근 가능)
                        var popoverTip = popoverInstance.tip;
                        popoverTip.style.backgroundColor = '#FF0000'; // 팝오버 배경 색상을 변경
                        popoverTip.style.height = 'auto';
                        popoverTip.style.width = 'auto';

                        // 내부 화살표에 대한 스타일 변경 (CSS를 사용하지 않고 appendChild를 이용하여 가상 요소의 스타일을 직접 변경)
                        var arrowInner = popoverTip.querySelector('.popover-arrow');
                        var styleTag = document.createElement('style');
                        styleTag.innerHTML = '::after { border-right-color: #FF0000 !important; }';
                        arrowInner.appendChild(styleTag);

                        setTimeout(function () {
                            popoverInstance.hide();  // 5000ms(5초) 뒤에 팝오버를 숨김
                        }, 5000);

                    }
                    <!-- 팝오버 알림 내용 생성 종료 -->


                })
                .catch(error => {
                    console.error('Error:', error);
                });


        });

        function clickSearch(search) {

            if (popoverInstance) {
                popoverInstance.hide();
            }

            var input = document.getElementById('expand-notify-menu');

            if (input.checked) {
                input.checked = false;
            }
        }

        function clickNotify(notify) {

            if (popoverInstance) {
                popoverInstance.hide();
            }

            noticeChecking(); // 알림메뉴 클릭시 알림체크여부를 false에서 true로 변경하는 함수

            var input = document.getElementById('expand-search-menu');

            if (input.checked) {
                input.checked = false;
            }
        }

        function offCanvas_img() {
            document.getElementById('logoImage').classList.add('offCanvas_img');
        }

        <!-- 알림 읽음처리 JS (비동기 fetch) -->
        function noticeChecking() {

            var token = $("input[name='_csrf']").attr("value");
            var header = $("input[name='_csrf_header']").attr("value");

            fetch('/notice/checking', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json; charset=utf-8',
                    [header]: token
                }
            })
                .then(response => {

                })
                .catch(error => {
                    // 오류 처리
                    console.error('POST 요청 실패:', error);
                });
        }




    </script>
</div>







