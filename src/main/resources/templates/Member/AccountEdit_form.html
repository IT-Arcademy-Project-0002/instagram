<html layout:decorate="~{Layout/layout_main}">
<head>
    <link rel="stylesheet" type="text/css" th:href="@{/member/css/UserPage.css}">
    <title>User Page</title>
</head>
<div layout:fragment="content">
    <div class="d-flex">
        <div class="main-content d-flex">
            <div class="col-3 overflow-scroll" style="width: 315px;">
                <!-- my instargram setting -->

                <div class="p-4">
                    <span>내 instargram 사용 방식</span>
                    <div class="px-2 py-3 border rounded-2">
                        <ul class="nav nav-pills flex-column mb-auto">
                            <!-- my account setting -->
                            <li class="nav-item w-100">
                                <a href="/member/account/edit" th:classappend="${#strings.equals(menu, 'edit')}?'active'" class="nav-link text-dark">프로필 편집</a>
                            </li>
                            <!-- notice setting -->
                            <li class="nav-item w-100">
                                <a href="/member/account/notice" th:classappend="${#strings.equals(menu, 'notice')}?'active'" class="nav-link text-dark">알림</a>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
            <div class="col-9">
                <div th:if="${#strings.equals(menu, 'edit')}">
                    <div class="d-flex justify-content-center">
                        <div class="col-6">
                            <div class="my-5">
                                <h5 class="fw-bold">프로필 편집</h5>
                                <!--  profile photo setting -->
                                <div class="my-5 d-flex justify-content-between align-items-center rounded-4" style="background: rgba(152,152,152,0.2)">
                                    <div class="d-flex m-3">
                                        <div class="me-2" style="position: relative; width: 65px; height: 65px;">
                                            <img th:if="${loginMember.image == null}" id="none_user_img"
                                                 src="/files/designImg/noneuser.png"
                                                 class="shadow rounded-circle text-center smooth-update"
                                                 style="position: absolute; top: 0; left: 0; transform: translate(50,50); width: 100%; height: 100%; object-fit: cover; margin: auto">
                                            <img th:unless="${loginMember.image == null}" id="user_img"
                                                 th:src="@{|/resources/${loginMember.image.name}|}"
                                                 class="shadow rounded-circle text-center smooth-update"
                                                 style="position: absolute; top: 0; left: 0; transform: translate(50,50); width: 100%; height: 100%; object-fit: cover; margin: auto">
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <div class="mx-2">
                                                <div th:text="${loginMember.username}" class="fw-bold"></div>
                                                <div th:text="${loginMember.nickname}"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="m-3">
                                        <button class="btn btn-primary">사진 변경</button>
                                    </div>
                                </div>

                                <!-- interest setting -->
                                <div class="my-5">
                                    <label for="interest" class="form-label fw-bold">소개</label>
                                    <input id="interest" name="interest" type="text" class="form-control" th:value="${loginMember.introduction == null}?'':${loginMember.introduction == null}">
                                </div>

                                <!-- sex setting -->
                                <div class="my-5">
                                    <label class="form-label fw-bold">성별</label>
                                    <div class="dropdown w-100">
                                        <a th:if="${loginMember.sex==null}"
                                           class="now-sex btn btn-outline-secondary w-100 text-start"
                                           role="button" data-bs-toggle="dropdown" aria-expanded="false">밝히고 싶지 않음</a>
                                        <a th:unless="${loginMember.sex==null}"
                                           class="now-sex btn btn-outline-secondary w-100 text-start"
                                           role="button" data-bs-toggle="dropdown" aria-expanded="false"
                                           th:text="${#strings.equals(loginMember.sex,'male')}?'남성':'여성'"></a>

                                        <ul class="dropdown-menu w-100">
                                            <li class="dropdown-item" onclick="changeSex('female')">여성</li>
                                            <li class="dropdown-item" onclick="changeSex('male')">남성</li>
                                            <li class="dropdown-item" onclick="changeSex('null')">밝히고 싶지 않음</li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- change profile button -->
                                <div class="d-flex justify-content-end">
                                    <input id="change-btn" type="submit" class="btn btn-primary w-25 mt-5" th:value="제출" form="change-profile" disabled="disabled">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <form id="change-profile" action="/member/changeProfile">
            <input id="now-sex" type="hidden" th:value="${loginMember.sex}">
            <input id="now-interest" type="hidden" th:value="${loginMember.introduction == null}?'':${loginMember.introduction == null}">
        </form>
    </div>
    <script th:src="@{/member/js/AccountEdit.js}"></script>
</div>
</html>
