<html layout:decorate="~{Layout/layout_main}">
<head>
    <title>User Page</title>
</head>
<div layout:fragment="content">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <input type="hidden" th:name="_csrf_header" th:value="${_csrf.headerName}"/>
    <div class="d-flex">
        <div class="main-content d-flex justify-content-center">
            <div th:if="${blocked}" class="text-center" style="padding: 40px">
                <div style="font-size: 24px; font-weight: bold; margin-top: 40px">
                    죄송합니다. 페이지를 사용할 수 없습니다.
                </div>
                <div style="font-size: 16px; margin-top: 40px">
                    클릭하신 링크가 잘못되었거나 페이지가 삭제되었습니다.
                    <a href="/main"> Instagram으로 돌아가기.</a>
                </div>
            </div>
            <!--mypage content-->
            <div th:if="${!blocked}" class="userPage_content">
                <!--mypage content inner-->
                <div class="userPage_content_inner">
                    <!--header-->
                    <div class="user_header">
                        <!--user photo-->
                        <div class="user_photo">
                            <div class="d-flex h-100 justify-content-center align-items-center">
                                <button th:if="${member.username == loginMember.username}"
                                        class="btn btn-light rounded-circle userProfile_btn"
                                        data-bs-toggle="modal" data-bs-target="#ProfilePhotoModifyModal">
                                    <img th:if="${member.image == null}" id="none_user_img"
                                         src="/files/designImg/noneuser.png"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                    <img th:unless="${member.image == null}" id="user_img"
                                         th:src="@{|/resources/${member.image.name}|}"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                </button>

                                <div th:unless="${member.username == loginMember.username}"
                                        class="btn-light rounded-circle userProfile_btn">
                                    <img th:if="${member.image == null}"
                                         src="/files/designImg/noneuser.png"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                    <img th:unless="${member.image == null}"
                                         th:src="@{|/resources/${member.image.name}|}"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                </div>

                                <!-- profile photo change modal -->
                                <div class="modal fade" id="ProfilePhotoModifyModal" tabindex="-1"
                                     aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered center">
                                        <div class="modal-content w400 bn">

                                            <div class="center">
                                                <div class="center"></div>
                                                <div class="w-100 h50 center fs20 mg16 fwb">
                                                        프로필 사진 변경
                                                </div>
                                            </div>
                                            <div class="bbsS bbw1 bbcDB w400"></div>

                                            <div class="modal-body p-0">
                                                <div class="btn-group-vertical w-100" role="group"
                                                     aria-label="Vertical button group">
                                                    <form th:action="@{|/member/profile/upload|}" method="post"
                                                          id="img-form" enctype="multipart/form-data">
                                                        <input type="file" accept="image/*" class="visually-hidden"
                                                               id="profile-photo-input"
                                                               name="profile-photo-input" onchange="readFile(this);">
                                                    </form>
                                                    <form th:action="@{|/member/profile/delete|}" method="post"
                                                          id="img-delete-form"></form>
                                                    <button type="button" class="btn w-100 h50 center hfwb afwb pdT4 pdB4 pdL8 pdR8 fs14 fcBlue hfcBlue bn"
                                                            onclick="clickProfilePhotoChange()">사진 업로드
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="submit" form="img-delete-form"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcRed fwb hfcRed hfwb bn">
                                                        현재 사진 삭제
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--user info-->
                        <div class="userInfo">
                            <!--user info header-->
                            <div class="userInfo_header">
                                <div class="d-flex align-items-center h-100 pt-2">
                                    <!-- user id -->
                                    <div>
                                        <input type="hidden" id="page-username" th:value="${member.username}">
                                        <h5 th:text="${member.username}" class="userID"></h5>
                                    </div>
                                    <!-- mine page -->
                                    <div th:if="${userPageDTO.isMine()}" class="d-flex align-items-center">
                                        <!-- button -->
                                        <div class="btn_area">
                                            <a class="btn btn_userInfo bn" th:href="@{/member/account/edit}">프로필 편집</a>
                                            <a class="btn btn_userInfo mgL8 bn">보관된 스토리 보기</a>
                                        </div>

                                        <!-- my page setting -->
                                        <a class="cp hcb" type="button" data-bs-toggle="modal"
                                           data-bs-target="#myPageSettingModal">
                                            <div class="setting center hfcBlack">
                                                <svg aria-label="옵션" stroke="currentColor" fill="currentColor"
                                                     height="24" role="img" viewBox="0 0 24 24" width="24"><title>
                                                    옵션</title>
                                                    <circle cx="12" cy="12" fill="none" r="8.635" stroke="currentColor"
                                                            stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2"></circle>
                                                    <path d="M14.232 3.656a1.269 1.269 0 0 1-.796-.66L12.93 2h-1.86l-.505.996a1.269 1.269 0 0 1-.796.66m-.001 16.688a1.269 1.269 0 0 1 .796.66l.505.996h1.862l.505-.996a1.269 1.269 0 0 1 .796-.66M3.656 9.768a1.269 1.269 0 0 1-.66.796L2 11.07v1.862l.996.505a1.269 1.269 0 0 1 .66.796m16.688-.001a1.269 1.269 0 0 1 .66-.796L22 12.93v-1.86l-.996-.505a1.269 1.269 0 0 1-.66-.796M7.678 4.522a1.269 1.269 0 0 1-1.03.096l-1.06-.348L4.27 5.587l.348 1.062a1.269 1.269 0 0 1-.096 1.03m11.8 11.799a1.269 1.269 0 0 1 1.03-.096l1.06.348 1.318-1.317-.348-1.062a1.269 1.269 0 0 1 .096-1.03m-14.956.001a1.269 1.269 0 0 1 .096 1.03l-.348 1.06 1.317 1.318 1.062-.348a1.269 1.269 0 0 1 1.03.096m11.799-11.8a1.269 1.269 0 0 1-.096-1.03l.348-1.06-1.317-1.318-1.062.348a1.269 1.269 0 0 1-1.03-.096"
                                                          fill="none" stroke="currentColor" stroke-linejoin="round"
                                                          stroke-width="2"></path>
                                                </svg>
                                            </div>
                                        </a>
                                    </div>

                                    <!-- my page setting Modal -->
                                    <div class="modal fade" id="myPageSettingModal" tabindex="-1"
                                         aria-labelledby="myPageSettingModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered center">

                                            <div class="modal-content w400 bn">
                                                <a href="/member/account/notice" type="button"
                                                   class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 알림 </a>

                                                <div class="btsS btw1 btcDB w400"></div>
                                                <a href="/member/account/who_can_see_your_content/" type="button"
                                                   class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 설정 및
                                                    개인정보 </a>

                                                <div class="btsS btw1 btcDB w400"></div>
                                                <a href="/member/logout"
                                                   class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 로그아웃 </a>

                                                <div class="btsS btw1 btcDB w400"></div>
                                                <button type="button" data-bs-dismiss="modal"
                                                        class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 취소
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- not mine page-->
                                    <div th:unless="${userPageDTO.isMine()}" class="d-flex align-items-center">
                                        <!-- button -->
                                        <div class="d-flex mgL20" th:if="${!blocking}">
                                            <a class="btn mw74 center"
                                               th:classappend="${userPageDTO.isFollow() or userPageDTO.isRequestFollow()}?'btn_following' : 'btn_follow'"
                                               th:attr="onclick=|clickFollowSwapInUserPage('${userPageDTO.isFollow() ? '/member/follow/delete' : '/member/follow'}')|">

                                                <span id="follow-spin"
                                                      class="visually-hidden spinner-border spinner-border-sm"
                                                      aria-hidden="true"></span>

                                                <span th:if="${userPageDTO.isFollow()}" class="follow-text fs14 fwb bn">팔로잉</span>

                                                <span th:if="${not userPageDTO.isFollow() and userPageDTO.isFollower() and not userPageDTO.isRequestFollow()}"
                                                      class="follow-text fs14 fwb bn">맞팔로우 하기</span>

                                                <span th:if="${userPageDTO.isRequestFollow()}"
                                                      class="follow-text fs14 fwb bn">요청됨</span>

                                                <span th:if="${not userPageDTO.isRequestFollow() and not userPageDTO.isFollow() and not userPageDTO.isFollower()}"
                                                      class="follow-text fs14 fwb bn">팔로우</span>
                                            </a>
                                            <a th:if="${not userPageDTO.isFollower() or userPageDTO.isFollow()}"
                                               class="btn btn_message mgL8 bn">메세지 보내기</a>
                                        </div>

                                        <div class="d-flex mgL20" th:if="${blocking}">
                                            <a class="btn mw74 center btn_follow"
                                               data-bs-target="#userBlockCancelModal" data-bs-toggle="modal">

                                                <span id="block-spin"
                                                      class="visually-hidden spinner-border spinner-border-sm"
                                                      aria-hidden="true"></span>
                                                <span class="follow-text fs14 fwb bn">차단 해제</span>
                                            </a>
                                        </div>

                                        <!-- user page setting -->
                                        <a class="cp hcb" type="button" data-bs-toggle="modal"
                                           data-bs-target="#userPageSettingModal">
                                            <div class="mgL5">
                                                <div class="pd8 wa hfcBlack">
                                                    <svg aria-label="옵션" fill="currentColor" height="32" role="img"
                                                         viewBox="0 0 24 24" width="32"><title>옵션</title>
                                                        <circle cx="12" cy="12" r="1.5"></circle>
                                                        <circle cx="6" cy="12" r="1.5"></circle>
                                                        <circle cx="18" cy="12" r="1.5"></circle>
                                                    </svg>
                                                </div>
                                            </div>
                                        </a>

                                        <!-- user page setting Modal -->
                                        <div class="modal fade" id="userPageSettingModal" tabindex="-1"
                                             aria-labelledby="userPageSettingModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered center">
                                                <div class="modal-content w400 bn">

                                                    <button th:if="${!blocking}" class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcRed fcRed fwb bn"
                                                            data-bs-target="#userBlockModal" data-bs-toggle="modal">
                                                        차단
                                                    </button>

                                                    <button th:if="${blocking}" class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcRed fcRed fwb bn"
                                                            data-bs-target="#userBlockCancelModal" data-bs-toggle="modal">
                                                        차단 해제
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- user block modal -->
                                        <div class="modal fade" id="userBlockModal" tabindex="-1"
                                             aria-labelledby="userBlockModalToggleLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered center">
                                                <div class="modal-content w400 bn">
                                                    <div class="center">
                                                        <div class="w-100 h-100 center mg32 fs14 fcGray"
                                                             id="userBlockModalToggleLabel">
                                                            <div class="text-center">
                                                                <span class="pdB16 fs20 fw600 fcBlack" th:text="@{|${member.username}님을 차단하시겠어요?|}"></span>
                                                                <br>상대방은 Instagram에서 회원님의 프로필, 게시물 및 <br>
                                                                스토리를 찾을 수 없게 됩니다. Instagram은 회원님이 <br>
                                                                차단한 사실을 상대방에게 알리지 않습니다.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button onclick="clickBlock()"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 hfcRed fcRed fwb bn">
                                                        차단
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal fade" id="userBlockCancelModal" tabindex="-1"
                                             aria-labelledby="userBlockModalToggleLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered center">
                                                <div class="modal-content w400 bn">
                                                    <div class="center">
                                                        <div class="w-100 h-100 center mg32 fs14 fcGray"
                                                             id="userBlockCancelModalToggleLabel">
                                                            <div class="text-center">
                                                                <span class="pdB16 fs20 fw600 fcBlack" th:text="@{|${member.username}님을 차단 해제하시겠어요?|}"></span>
                                                                <br>이제 상대방은 Instagram에서 회원님의 게시물을 보고 회원님을 팔로우할 수 있습니다. Instagram은 회원님이 차단을 해제한 사실을 상대방에게 알리지 않습니다.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button onclick="clickBlockCancel()"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 hfcRed fcRed fwb bn">
                                                        차단 해제
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--user follow info-->
                            <div class="d-flex user_follow_info aIC">
                                <div class="me-5">
                                    <span>게시물</span>
                                    <span class="fw600" th:text="${userPageDTO.feedSize}"></span>
                                </div>
                                <div class="me-5">
                                    <span>팔로워</span>
                                    <span class="fw600" id="followers"
                                          th:text="${#lists.size(userPageDTO.followers)}"></span>
                                </div>
                                <div>
                                    <span>팔로잉</span>
                                    <span class="fw600" id="follows"
                                          th:text="${#lists.size(userPageDTO.followings)}"></span>
                                </div>
                            </div>

                            <!--user info interest-->
                            <div class="d-flex flex-column justify-content-between mh30 h30">
                                <div class="fs14 fw-bold pdT5">
                                    <span th:text="${member.nickname}"></span>
                                </div>
                                <div class="fs14 pdT5 mgB0">
                                    <span th:text="${member.introduction}"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div th:if="${!blocking}">
                        <!--story highlight --> <!-- 'visually-hidden' -->
                        <div class="h130 mgB44" th:classappend="${#maps.isEmpty(userPageDTO.stories)} ? ''">
                            <div class="h_100">
                                <div class="d-flex h_100">
                                    <div class="mgL24">
                                        <div class="w115 pdT10 pdR15 pdB10 pdL15">
                                            <a type="button" data-bs-toggle="modal" data-bs-target="#highlightModal">
                                                <div>
                                                    <div>
                                                        <div class="highlight_line center">
                                                            <div class="d-flex highlight_line_internal">
                                                                <svg aria-label="+ 아이콘" class="highlight_icon"
                                                                     fill="currentColor" height="44"
                                                                     role="img" viewBox="0 0 24 24" width="44"><title>+
                                                                    아이콘</title>
                                                                    <path d="M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.2H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.4-.7-.8-.7z"></path>
                                                                </svg>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="pdT10">
                                                        <div class="new_text">
                                                            신규
                                                        </div>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- highlight modal -->
                        <div class="modal fade" id="highlightModal" tabindex="-1"
                             aria-labelledby="highlightModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered center">
                                <div class="modal-content w400 bn">

                                    <div class="center">
                                        <div class="center fb48"></div>
                                        <div class="w-100 h50 center pdT4 pdB4 pdL8 pdR8 fs16 fwb" id="highlightModalLabel">
                                            새로운 하이라이트
                                        </div>
                                        <div class="center fb48">
                                            <button type="button" class="btn-close pd8 fwb bn"
                                                    data-bs-dismiss="modal" aria-label="Close">
                                            </button>
                                        </div>
                                    </div>
                                    <div class="bbsS bbw1 bbcDB w400"></div>

                                    <div class="mg20">
                                        <label class="d-flex justify-content-center">
                                            <input type="text" name="highlightname" id="highlightname"
                                                   class="highlight_input" placeholder="하이라이트 이름">
                                        </label>
                                    </div>

                                    <div class="btsS btw1 btcDB w400"></div>
                                    <button class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn"
                                            data-bs-target="#highlightListModal" data-bs-toggle="modal"> 다음
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- highlight list modal -->
                        <div class="modal fade" id="highlightListModal" tabindex="-1"
                             aria-labelledby="highlightListModalToggleLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered center">
                                <div class="modal-content w400 bn">
                                    <div class="center">

                                        <div class="center fb48">
                                            <button type="button" class="btn_back pd8 fwb" data-bs-target="#highlightModal"
                                                    data-bs-toggle="modal">
                                                <svg aria-label="돌아가기" class="" fill="currentColor" height="21" role="img"
                                                     viewBox="0 0 24 24" width="21"><title>돌아가기</title>
                                                    <path d="M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z"
                                                          transform="rotate(-90 12 12)"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="w-100 h50 center pdT4 pdB4 pdL8 pdR8 fs16 fwb"
                                             id="highlightListModalToggleLabel"> 스토리 목록
                                        </div>

                                        <div class="center fb48">
                                            <button type="button" class="btn-close pd8 fwb bn"
                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                    </div>
                                    <div class="bbsS bbw1 bbcDB w400"></div>

                                    <div class="modal-body h600 center">
                                        스토리 리스트 수정 중
                                    </div>

                                    <div class="btsS btw1 btcDB w400"></div>
                                    <button class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn"
                                            data-bs-target="#storyCoverChoiceModal" data-bs-toggle="modal"> 다음
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- story cover choice -->
                        <div class="modal fade" id="storyCoverChoiceModal" tabindex="-1"
                             aria-labelledby="storyCoverChoiceModalToggleLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered center">
                                <div class="modal-content w400 bn">
                                    <div class="center">

                                        <div class="center fb48">
                                            <button type="button" class="btn_back pd8 fwb"
                                                    data-bs-target="#highlightListModal" data-bs-toggle="modal">
                                                <svg aria-label="돌아가기" class="" fill="currentColor" height="21" role="img"
                                                     viewBox="0 0 24 24" width="21"><title>돌아가기</title>
                                                    <path d="M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z"
                                                          transform="rotate(-90 12 12)"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="w-100 h50 center pdT4 pdB4 pdL8 pdR8 fs16 fwb"
                                             id="highlightListModalToggleLabel3"> 커버 선택
                                        </div>

                                        <div class="center fb48">
                                            <button type="button" class="btn-close pd8 fwb bn"
                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                    </div>
                                    <div class="bbsS bbw1 bbcDB w400"></div>

                                    <div class="modal-body h600 center">
                                        커버 선택 수정 중
                                    </div>

                                    <div class="btsS btw1 btcDB w400"></div>
                                    <button class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcBlue hfcBlue bn"
                                            data-bs-dismiss="modal"> 완료
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="btsS btcDB btw1"></div>

                        <div th:if="${member.scope or userPageDTO.isMine()}">
                            <!--board list menu-->
                            <div class="d-flex justify-content-center align-items-center h53">
                                <div class="d-flex">
                                    <div class="center h52 mgR60 hfcBlack">
                                        <a class="center btn pd0 mgL6 fs12 fwb fcGray bn hfcBlack" href="">
                                            <svg aria-label="" fill="currentColor" height="12" role="img"
                                                 viewBox="0 0 24 24" width="12"><title></title>
                                                <rect fill="none" height="18" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" width="18" x="3"
                                                      y="3"></rect>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="9.015" x2="9.015" y1="3"
                                                      y2="21"></line>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="14.985" x2="14.985"
                                                      y1="3" y2="21"></line>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="21" x2="3" y1="9.015"
                                                      y2="9.015"></line>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="21" x2="3" y1="14.985"
                                                      y2="14.985"></line>
                                            </svg>
                                            <div class="mgL6">게시물</div>

                                        </a>
                                    </div>

                                    <div class="center h52 mgR60">
                                        <a class="center btn pd0 mgL6 fs12 fwb fcGray bn hfcBlack" th:href="@{|/member/page/${member.username}/saved|}">
                                            <svg aria-label="" fill="currentColor" height="12" role="img"
                                                 viewBox="0 0 24 24" width="12"><title></title>
                                                <polygon fill="none" points="20 21 12 13.44 4 21 4 3 20 3 20 21"
                                                         stroke="currentColor" stroke-linecap="round"
                                                         stroke-linejoin="round" stroke-width="2"></polygon>
                                            </svg>
                                            <div class="mgL6"> 저장됨</div>
                                        </a>
                                    </div>

                                    <div class="center h52">
                                        <a class="center btn pd0 mgL6 fs12 fwb fcGray bn hfcBlack" th:href="@{|/member/page/${member.username}/tagged|}">
                                            <svg aria-label="" fill="currentColor" height="12" role="img"
                                                 viewBox="0 0 24 24" width="12"><title></title>
                                                <path d="M10.201 3.797 12 1.997l1.799 1.8a1.59 1.59 0 0 0 1.124.465h5.259A1.818 1.818 0 0 1 22 6.08v14.104a1.818 1.818 0 0 1-1.818 1.818H3.818A1.818 1.818 0 0 1 2 20.184V6.08a1.818 1.818 0 0 1 1.818-1.818h5.26a1.59 1.59 0 0 0 1.123-.465Z"
                                                      fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2"></path>
                                                <path d="M18.598 22.002V21.4a3.949 3.949 0 0 0-3.948-3.949H9.495A3.949 3.949 0 0 0 5.546 21.4v.603"
                                                      fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2"></path>
                                                <circle cx="12.072" cy="11.075" fill="none" r="3.556" stroke="currentColor"
                                                        stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"></circle>
                                            </svg>
                                            <div class="mgL6"> 태그됨</div>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!--board list-->
                            <div style="height: calc(100vh - 497px);">
                                <div class="row row-cols-3 mx-0 p-0">
                                    <div th:each="feed : ${userPageDTO.feeds}" class="col mb-1 p-0">
                                        <div class="d-flex justify-content-center">
                                            <div class="pr w300 h300" type="button"
                                                 th:onclick="@{|clickShowDetailBoard(${feed.board().id})|}">
                                                <img th:src="@{|/resources/${feed.fileDTOS().get(0).name}|}"
                                                     class="shadow-sm text-center smooth-update userProfile_line pa top0 left0 w-100 h_100 mga ofc"
                                                     style="transform: translate(50,50)">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div th:unless="${member.scope or userPageDTO.isMine()}">
                        <div class="bdb border-1 pd40" style="border-top: none !important;">
                            <div class="text-center fs14">
                                비공개 계정입니다
                                <br>
                                <br>
                                사진 및 동영상을 보려면 팔로우하세요.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div type="button" data-bs-toggle="modal"
         data-bs-target="#BoardDetailModal" class="visually-hidden" id="BoardDetailModal-button">

    </div>
    <!--Board Detail Modal -->
    <div class="modal fade" id="BoardDetailModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <div th:if="${selectFeed}">
                        <div class="row mx-0">
                            <div class="col-7 p-0">
                                <div id="carousel-main" class="carousel slide" data-interval="false"
                                     data-bs-touch="false">
                                    <!-- 캐러셀 인디케이터 -->
                                    <div class="carousel-indicators"
                                         th:classappend="${#lists.size(selectFeed.fileDTOS()) == 1 }? 'visually-hidden'">
                                        <div th:each="file, iterStat: ${selectFeed.fileDTOS()}">
                                            <div data-bs-target="#carousel-main"
                                                 th:data-bs-slide-to="${iterStat.index}"
                                                 th:classappend="${iterStat.index == 0} ? 'active' : ''"
                                                 style="width: 10px; height: 10px; border-radius: 50%;"></div>
                                        </div>
                                    </div>
                                    <div class="carousel-inner">
                                        <div th:each="file, iterStat: ${selectFeed.fileDTOS()}">
                                            <div class="carousel-item"
                                                 style="position: relative; width: 60rem; height: 50rem;"
                                                 th:classappend="${iterStat.index == 0} ? 'active' : ''">
                                                <!-- 이미지인 경우 -->
                                                <img th:if="${#strings.endsWith(file.name, '.jpg') or #strings.endsWith(file.name, '.jpeg') or #strings.endsWith(file.name, '.png')}"
                                                     th:id="${file.getId()}"
                                                     th:src="@{|/resources/${file.name}|}"
                                                     alt="..."
                                                     class="shadow text-center"
                                                     style="width: 70%; height:100%; position: absolute; top: 0; left: 0; transform: translate(50,50); object-fit: cover; margin: auto">

                                                <!-- 비디오인 경우 -->
                                                <video th:if="${#strings.endsWith(file.name, '.mp4') or #strings.endsWith(file.name, '.webm') or #strings.endsWith(file.name, '.mov')}"
                                                       th:id="${file.getId()}"
                                                       class="shadow text-center"
                                                       th:src="@{|/resources/${file.name}|}"
                                                       controls autoplay muted
                                                       style="width: 70%; height:100%; position: absolute; top: 0; left: 0; transform: translate(50,50); object-fit: cover; margin: auto">
                                                </video>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="carousel-control-prev" type="button"
                                            data-bs-target="#carousel-main"
                                            th:classappend="${#lists.size(selectFeed.fileDTOS()) == 1 }? 'visually-hidden'"
                                            data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon"
                                              aria-hidden="true"></span>
                                        <span class="visually-hidden">Previous</span>
                                    </button>
                                    <button class="carousel-control-next" type="button"
                                            data-bs-target="#carousel-main"
                                            th:classappend="${#lists.size(selectFeed.fileDTOS()) == 1 }? 'visually-hidden'"
                                            data-bs-slide="next">
                                        <span class="carousel-control-next-icon"
                                              aria-hidden="true"></span>
                                        <span class="visually-hidden">Next</span>
                                    </button>
                                </div>
                            </div>
                            <div class="col-5 p-0" style="height: 800px;">
                                <div class="d-flex align-items-center border-bottom"
                                     style="padding: 14px 16px 14px 16px; height: 10%;">
                                    <div class="d-flex align-items-center" style="flex:6;">

                                        <!--location null-->
                                        <div th:if="${selectFeed.board.locationDTO == null}">
                                            <div class="d-flex">
                                                <div style="position: relative; width: 2rem; height: 2rem;">
                                                    <img th:if="${selectFeed.board.memberDTO.imageDTO == null}"
                                                         src="/files/designImg/noneuser.png"
                                                         class="shadow rounded-circle text-center"
                                                         style="width: 100%; height: 100%; object-fit: cover;">
                                                    <img th:unless="${selectFeed.board.memberDTO.imageDTO == null}"
                                                         th:src="@{|/resources/${selectFeed.board.memberDTO.imageDTO.name}|}"
                                                         class="shadow rounded-circle text-center"
                                                         style="width: 100%; height: 100%; object-fit: cover;">
                                                </div>
                                                <div class="d-flex mx-2">
                                                    <div class="d-flex">
                                                        <div style="font-weight: bold; font-size: medium"
                                                             th:text="${selectFeed.board.memberDTO.username}"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!--location not null-->
                                        <div th:if="${selectFeed.board.locationDTO != null}">
                                            <div class="d-flex">
                                                <div style="position: relative; width: 2rem; height: 2rem;">
                                                    <img th:if="${selectFeed.board.memberDTO.imageDTO == null}"
                                                         src="/files/designImg/noneuser.png"
                                                         class="shadow rounded-circle text-center"
                                                         style="width: 100%; height: 100%; object-fit: cover;">
                                                    <img th:unless="${selectFeed.board.memberDTO.imageDTO == null}"
                                                         th:src="@{|/resources/${selectFeed.board.memberDTO.imageDTO.name}|}"
                                                         class="shadow rounded-circle text-center"
                                                         style="width: 100%; height: 100%; object-fit: cover;">
                                                </div>
                                                <div class="d-flex flex-column mx-2">
                                                    <div class="d-flex">
                                                        <div style="font-weight: bold; font-size: medium"
                                                             th:text="${selectFeed.board.memberDTO.username}"></div>
                                                    </div>
                                                    <div class="d-flex" style="font-size: 0.8rem;">
                                                        <div th:text="${selectFeed.board.locationDTO.placeName}"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex" style="flex:1;">
                                        <button type="button" class="btn noneBtn btn-link"
                                                th:if="${selectFeed.board.memberDTO.username} == ${loginMember.username}"
                                                data-bs-toggle="modal"
                                                data-bs-target="#CreateUserBoardSettingModal">
                                            <svg aria-label="옵션 더 보기"
                                                 fill="currentColor" height="24" role="img" viewBox="0 0 24 24"
                                                 width="24"><title>옵션 더 보기</title>
                                                <circle cx="12" cy="12" r="1.5"></circle>
                                                <circle cx="6" cy="12" r="1.5"></circle>
                                                <circle cx="18" cy="12" r="1.5"></circle>
                                            </svg>
                                        </button>
                                        <!-- 다른 경우 UserBoardSettingModal 버튼을 보여줍니다. -->
                                        <button type="button" class="btn noneBtn btn-link"
                                                th:if="${selectFeed.board.memberDTO.username} != ${loginMember.username}"
                                                data-bs-toggle="modal"
                                                data-bs-target="#UserBoardSettingModal">
                                            <svg aria-label="옵션 더 보기"
                                                 fill="currentColor" height="24" role="img" viewBox="0 0 24 24"
                                                 width="24"><title>옵션 더 보기</title>
                                                <circle cx="12" cy="12" r="1.5"></circle>
                                                <circle cx="6" cy="12" r="1.5"></circle>
                                                <circle cx="18" cy="12" r="1.5"></circle>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                <div class="d-flex flex-column border-bottom"
                                     style="height: 67%; overflow-y: auto;">
                                    <div class="d-flex" style="padding: 14px 16px 14px 16px;">
                                        <div class="me-3"
                                             style="position: relative; width: 2rem; height: 2rem;">
                                            <img th:if="${selectFeed.board.memberDTO.imageDTO == null || selectFeed.board.memberDTO.imageDTO.name == null || selectFeed.board.memberDTO.imageDTO.name.isEmpty()}"
                                                 src="/files/designImg/noneuser.png"
                                                 class="shadow rounded-circle text-center"
                                                 style="position: absolute; top: 0; right: 0; width: 100%; height: 100%; object-fit: cover;">
                                            <img th:unless="${selectFeed.board.memberDTO.imageDTO == null || selectFeed.board.memberDTO.imageDTO.name == null || selectFeed.board.memberDTO.imageDTO.name.isEmpty()}"
                                                 th:src="@{|/resources/${selectFeed.board.memberDTO.imageDTO.name}|}"
                                                 class="shadow rounded-circle text-center"
                                                 style="position: absolute; top: 0; right: 0; width: 100%; height: 100%; object-fit: cover;">
                                        </div>
                                        <div class="d-flex flex-column" style="width: 80%;">
                                            <div class="d-flex justify-content-start align-items-center"
                                                 style="font-weight:bold;"
                                                 th:text="${selectFeed.board.memberDTO.username}"></div>
                                            <div class="d-flex justify-content-start align-items-center"
                                                 style="white-space: pre-wrap;"
                                                 th:text="${selectFeed.board.content}"></div>

                                            <div class="d-flex" style="width: 100%;"
                                                 th:classappend="${selectFeed.board.boardTagMembers == null} ? 'visually-hidden' : ''">
                                                <div th:each="tagMember : ${selectFeed.board.boardTagMembers}">
                                                    <a th:href="@{|/member/page/${tagMember}|}">
                                                        <button class="btn btn-link noneBtn p-0 text-primary"
                                                                th:text="'@' + ${tagMember}"></button>
                                                    </a>
                                                </div>
                                            </div>

                                            <div class="d-flex flex-wrap" style="width: 100%;">
                                                <div th:each="hashTag : ${selectFeed.board.boardHashTags}">
                                                    <a href="#">
                                                        <button class="btn btn-link noneBtn p-0 text-primary"
                                                                th:text="'#' + ${hashTag}"></button>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="ModalCommentDisable"
                                         th:classappend="${selectFeed.board.getCommentDisable() == true} ? 'visually-hidden'">
                                        <div id="comment"></div>

                                        <!-- Comment List -->
                                        <div th:each="comment, loop : ${selectFeed.commentDTOS}"
                                             th:id="${'comment-' + comment.id}">
                                            <div class="d-flex comment-container"
                                                 style="padding: 5px 16px 5px 16px;">
                                                <div class="d-flex justify-content-center">
                                                    <div class="me-3"
                                                         style="position: relative; width: 2rem; height: 2rem;">
                                                        <img th:if="${comment.memberDTO.imageDTO == null || comment.memberDTO.imageDTO.name == null || comment.memberDTO.imageDTO.name.isEmpty()}"
                                                             src="/files/designImg/noneuser.png"
                                                             class="shadow rounded-circle text-center"
                                                             style="position: absolute; top: 0; right: 0; width: 100%; height: 100%; object-fit: cover;">
                                                        <img th:unless="${comment.memberDTO.imageDTO == null || comment.memberDTO.imageDTO.name == null || comment.memberDTO.imageDTO.name.isEmpty()}"
                                                             th:src="@{|/resources/${comment.memberDTO.imageDTO.name}|}"
                                                             class="shadow rounded-circle text-center"
                                                             style="position: absolute; top: 0; right: 0; width: 100%; height: 100%; object-fit: cover;">
                                                    </div>
                                                </div>
                                                <div class="d-flex justify-content-center align-items-center w-100">
                                                    <div class="d-flex flex-column w-100">
                                                        <div class="d-flex mb-2">
                                                            <div class="pe-2"
                                                                 th:text="${comment.memberDTO.username}"
                                                                 th:id="'comment-username' + ${comment.id}"></div>
                                                            <div class="pe-2" th:text="${comment.content}"></div>
                                                        </div>
                                                        <div class="d-flex w-80">
                                                            <div class="pe-2 text-dark small"
                                                                 style="width: 30%; font-size: 12px;"
                                                                 th:text="${#temporals.format(comment.createDate, 'MM월dd일 HH:mm')}"></div>
                                                            <div class="pe-2 text-dark small"
                                                                 th:id="@{|modalCommentLikeCount${comment.id}|}"
                                                                 style="width: 20%; font-size: 12px;"
                                                                 th:text="'좋아요 ' + ${#lists.size(comment.getCommentLikeMemberIds())} + '개'"></div>

                                                            <!--대댓글 달기-->
                                                            <a class="btn noneBtn btn-sm btn-link text-dark small p-0 pe-2"
                                                               style="width: 20%; font-size: 12px;"
                                                               th:onclick="@{|Comment(${comment.id})|}">답글 달기</a>

                                                            <!-- Button trigger modal -->
                                                            <!-- setCommentOptionTarget -->
                                                            <button type="button"
                                                                    style="font-size: 12px; width: 10%;"
                                                                    class="btn noneBtn btn-sm btn-link p-0 commentBtn"
                                                                    data-bs-toggle="modal"
                                                                    th:data-id="${comment.id}"
                                                                    onclick="setCommentOptionTarget(this)"
                                                                    th:attr="data-bs-target=(${comment.memberDTO.username} == ${loginMember.username}) ? '#BoardUserCommentModal' : '#UserCommentModal'">
                                                                <svg aria-label="옵션 더 보기"
                                                                     fill="currentColor" height="24" role="img"
                                                                     viewBox="0 0 24 24"
                                                                     width="24"><title>옵션 더 보기</title>
                                                                    <circle cx="12" cy="12" r="1.5"></circle>
                                                                    <circle cx="6" cy="12" r="1.5"></circle>
                                                                    <circle cx="18" cy="12" r="1.5"></circle>
                                                                </svg>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <a th:onclick="@{|ModalCommentClickLike(${comment.id})|}"
                                                       th:id="${#lists.contains(comment.commentLikeMemberIds, loginMember.id)}">
                                                        <svg th:id="@{|modal-comment-liked-svg${comment.id}|}"
                                                             th:classappend="${#lists.contains(comment.commentLikeMemberIds, loginMember.id)}?'visually-hidden':''"
                                                             aria-label="좋아요"
                                                             fill="currentColor"
                                                             height="18" width="18" role="img"
                                                             viewBox="0 0 24 24"
                                                             style="color: black;">
                                                            <path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path>
                                                        </svg>
                                                        <svg th:id="@{|modal-comment-not-like-svg${comment.id}|}"
                                                             aria-label="좋아요 취소"
                                                             th:classappend="${#lists.contains(comment.commentLikeMemberIds, loginMember.id)}?'':'visually-hidden'"
                                                             fill="currentColor"
                                                             height="18" width="18" role="img"
                                                             viewBox="0 0 48 48"
                                                             style="color:red;">
                                                            <path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path>
                                                        </svg>
                                                    </a>
                                                </div>
                                            </div>
                                            <div th:id="'recommentChickBtn-' + ${comment.id}">
                                                <div class="d-flex justify-content-center align-items-center"
                                                     th:if="${#lists.size(comment.recommentDTOS) > 0}"
                                                     th:onclick="@{|ReCommentContainerToggleReplies(${comment.id})|}">
                                                    <button class="btn noneBtn btn-sm btn-link"
                                                            style="display: none; font-size: 12px;"
                                                            th:id="'recommentContainer-' + ${comment.id}">
                                                        답글 숨기기
                                                    </button>
                                                    <button class="btn noneBtn btn-sm btn-link"
                                                            style="font-size: 12px;"
                                                            th:id="'recommentCount-' + ${comment.id}"
                                                            th:text="'ㅡㅡㅡ  답글 보기(' + ${#lists.size(comment.recommentDTOS)} + ')'">
                                                    </button>
                                                </div>
                                            </div>

                                            <div th:id="'repliesContainer-' + ${comment.id}" style="display: none;">
                                                <!-- Comment => Recomment List -->
                                                <div th:each="recomment : ${comment.recommentDTOS}"
                                                     th:id="${'recomment-' + recomment.id}">
                                                    <ul class="recomment-container" style="margin:0">
                                                        <li class="d-flex" style="padding:10px 16px 0 10px;">
                                                            <div class="me-3"
                                                                 style="position: relative; width: 2rem; height: 2rem;">
                                                                <img th:if="${recomment.memberDTO.imageDTO == null || recomment.memberDTO.imageDTO.name == null || recomment.memberDTO.imageDTO.name.isEmpty()}"
                                                                     src="/files/designImg/noneuser.png"
                                                                     class="shadow rounded-circle text-center"
                                                                     style="position: absolute; top: 0; right: 0; width: 32px; height: 32px; object-fit: cover;">
                                                                <img th:unless="${recomment.memberDTO.imageDTO == null || recomment.memberDTO.imageDTO.name == null || recomment.memberDTO.imageDTO.name.isEmpty()}"
                                                                     th:src="@{|/resources/${recomment.memberDTO.imageDTO.name}|}"
                                                                     class="shadow rounded-circle text-center"
                                                                     style="position: absolute; top: 0; right: 0; width: 32px; height: 32px; object-fit: cover;">
                                                            </div>
                                                            <div class="d-flex justify-content-center align-items-center w-100">
                                                                <div class="d-flex flex-column w-100">
                                                                    <div class="d-flex mb-2">
                                                                        <div class="pe-2"
                                                                             th:text="${recomment.memberDTO.username}"
                                                                             th:id="'recomment-username' + ${recomment.id}"></div>
                                                                        <div th:text="${recomment.content}"></div>
                                                                    </div>
                                                                    <div class="d-flex w-80">
                                                                        <div class="pe-2 text-dark small"
                                                                             style="width: 30%; font-size: 12px;"
                                                                             th:text="${#temporals.format(recomment.createDate, 'MM월dd일 HH:mm')}"></div>
                                                                        <div class="pe-2 text-dark small"
                                                                             th:id="@{|modalRecommentLikeCount${recomment.id}|}"
                                                                             style="width: 20%; font-size: 12px;"
                                                                             th:text="'좋아요 ' + ${#lists.size(recomment.getRecommentLikeMemberIds())} + '개'"></div>

                                                                        <!--대댓글 달기-->
                                                                        <a class="btn noneBtn btn-sm btn-link text-dark small p-0 pe-2"
                                                                           style="width: 20%; font-size: 12px;"
                                                                           th:onclick="@{|Recomment(${comment.id}, ${recomment.id})|}">답글
                                                                            달기</a>

                                                                        <!-- Button trigger modal -->
                                                                        <!--setRecommentOptionTarget-->
                                                                        <button type="button"
                                                                                style="font-size: 12px; width: 10%;"
                                                                                class="btn noneBtn btn-sm btn-link p-0 recommentBtn"
                                                                                data-bs-toggle="modal"
                                                                                th:comment-id="${comment.id}"
                                                                                th:recomment-id="${recomment.id}"
                                                                                onclick="setRecommentOptionTarget(this)"
                                                                                th:attr="data-bs-target=(${recomment.memberDTO.username} == ${loginMember.username}) ? '#ReCommentCreateUserModal' : '#ReCommentUserModal'">
                                                                            <svg aria-label="옵션 더 보기"
                                                                                 fill="currentColor" height="24"
                                                                                 role="img" viewBox="0 0 24 24"
                                                                                 width="24"><title>옵션 더 보기</title>
                                                                                <circle cx="12" cy="12"
                                                                                        r="1.5"></circle>
                                                                                <circle cx="6" cy="12"
                                                                                        r="1.5"></circle>
                                                                                <circle cx="18" cy="12"
                                                                                        r="1.5"></circle>
                                                                            </svg>
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <a th:onclick="@{|ModalRecommentClickLike(${recomment.id})|}"
                                                               th:id="${#lists.contains(recomment.recommentLikeMemberIds, loginMember.id)}">
                                                                <svg th:id="@{|modal-recomment-liked-svg${recomment.id}|}"
                                                                     th:classappend="${#lists.contains(recomment.recommentLikeMemberIds, loginMember.id)}?'visually-hidden':''"
                                                                     aria-label="좋아요"
                                                                     fill="currentColor"
                                                                     height="18" width="18" role="img"
                                                                     viewBox="0 0 24 24"
                                                                     style="color: black;">
                                                                    <path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path>
                                                                </svg>
                                                                <svg th:id="@{|modal-recomment-not-like-svg${recomment.id}|}"
                                                                     aria-label="좋아요 취소"
                                                                     th:classappend="${#lists.contains(recomment.recommentLikeMemberIds, loginMember.id)}?'':'visually-hidden'"
                                                                     fill="currentColor"
                                                                     height="18" width="18" role="img"
                                                                     viewBox="0 0 48 48"
                                                                     style="color:red;">
                                                                    <path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path>
                                                                </svg>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <!-- Recomment List End-->
                                        </div>
                                    </div>
                                </div>
                                <div class="border-bottom" style="height: 13%">
                                    <div class="d-flex flex-column m-1">
                                        <div class="d-flex justify-content-between">
                                            <div class="d-flex">
                                                <!--Like-->
                                                <div class="p-2" role="button" tabindex="0">
                                                    <div>
                                                        <a th:onclick="@{|ModalclickLike(${selectFeed.board.id})|}"
                                                           th:id="${#lists.contains(selectFeed.board.boardLikeMemberIds, loginMember.id)}">
                                                            <svg th:id="@{|modal-liked-svg${selectFeed.board.id}|}"
                                                                 th:classappend="${#lists.contains(selectFeed.board.boardLikeMemberIds, loginMember.id)}?'visually-hidden':''"
                                                                 aria-label="좋아요"
                                                                 fill="currentColor"
                                                                 height="24" width="24" role="img"
                                                                 viewBox="0 0 24 24"
                                                                 style="color: black;">
                                                                <path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path>
                                                            </svg>
                                                            <svg th:id="@{|modal-not-like-svg${selectFeed.board.id}|}"
                                                                 aria-label="좋아요 취소"
                                                                 th:classappend="${#lists.contains(selectFeed.board.boardLikeMemberIds, loginMember.id)}?'':'visually-hidden'"
                                                                 fill="currentColor"
                                                                 height="24" width="24" role="img"
                                                                 viewBox="0 0 48 48"
                                                                 style="color:red;">
                                                                <path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path>
                                                            </svg>
                                                        </a>
                                                    </div>
                                                </div>

                                                <!--Comment-->
                                                <div class="p-2" type="button" tabindex="0"
                                                     data-bs-toggle="modal"
                                                     data-bs-target="#selectFeedModal">
                                                    <svg aria-label="댓글 달기" fill="currentColor"
                                                         height="24" width="24" role="img"
                                                         viewBox="0 0 24 24" style="color: black;">
                                                        <path d="M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z"
                                                              fill="none"
                                                              stroke="currentColor"
                                                              stroke-linejoin="round"
                                                              stroke-width="2"></path>
                                                    </svg>
                                                </div>

                                                <!--share-->
                                                <div class="p-2" role="button" tabindex="0">
                                                    <svg aria-label="게시물 공유"
                                                         fill="currentColor" height="24" role="img"
                                                         viewBox="0 0 24 24"
                                                         width="24"><title>게시물 공유</title>
                                                        <line fill="none" stroke="currentColor"
                                                              stroke-linejoin="round"
                                                              stroke-width="2" x1="22" x2="9.218"
                                                              y1="3"
                                                              y2="10.083"></line>
                                                        <polygon fill="none"
                                                                 points="11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334"
                                                                 stroke="currentColor"
                                                                 stroke-linejoin="round"
                                                                 stroke-width="2"></polygon>
                                                    </svg>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                                <a class="popoverLink"
                                                   th:onclick="@{|ModalclickSaveGroup(${selectFeed.board.id})|}"
                                                   th:id="${#lists.contains(selectFeed.board.boardSaveIds, selectFeed.board.id)}">
                                                    <div class="p-2" role="button" tabindex="0">
                                                        <svg th:id="@{|modal-saved-svg${selectFeed.board.id}|}"
                                                             `                    aria-label="저장"
                                                             th:classappend="${#lists.contains(selectFeed.board.boardSaveIds, selectFeed.board.id)} ? 'visually-hidden' : '' "
                                                             fill="currentColor" height="24" role="img"
                                                             viewBox="0 0 24 24"
                                                             width="24">
                                                            <title>저장</title>
                                                            <polygon fill="none"
                                                                     points="20 21 12 13.44 4 21 4 3 20 3 20 21"
                                                                     stroke="currentColor"
                                                                     stroke-linecap="round" stroke-linejoin="round"
                                                                     stroke-width="2"></polygon>
                                                        </svg>
                                                        <svg th:id="@{|modal-not-save-svg${selectFeed.board.id}|}"
                                                             aria-label="삭제"
                                                             th:classappend="${#lists.contains(selectFeed.board.boardSaveIds, selectFeed.board.id)} ? '' : 'visually-hidden' "
                                                             fill="currentColor" height="24" role="img"
                                                             viewBox="0 0 24 24"
                                                             width="24">
                                                            <title>삭제</title>
                                                            <path d="M20 22a.999.999 0 0 1-.687-.273L12 14.815l-7.313 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z"></path>
                                                        </svg>
                                                    </div>
                                                </a>

                                                <div class="popover"
                                                     style="width: 300px; height: 200px; display: none;">
                                                    <div class="d-flex flex-column">
                                                        <div class="d-flex justify-content-between align-items-center mx-3 my-2 p-0">
                                                            <div class="Collection"
                                                                 style="font-weight: bold; font-size: 1rem;"
                                                                 text="컬렉션"></div>
                                                            <div class="btn noneBtn btn-link"
                                                                 style="font-weight: bold; font-size: 1rem;">
                                                                <svg aria-label="+ 아이콘" class="highlight_icon"
                                                                     fill="currentColor" height="24" role="img"
                                                                     viewBox="0 0 24 24" width="24"><title>+
                                                                    아이콘</title>
                                                                    <path d="M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.2H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.4-.7-.8-.7z"></path>
                                                                </svg>
                                                            </div>
                                                        </div>
                                                        <div class="border-bottom"></div>
                                                        <div>
                                                            Your popover content here...
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- 좋아요 갯수 -->
                                        <div class="px-2" id="modalLikeCount"
                                             th:text="${selectFeed.board.likeHide == false ? '좋아요 ' + #lists.size(selectFeed.board.boardLikeMemberIds) + '개' : '좋아요 여러개 입니다.'}"></div>
                                        <div class="px-2"
                                             th:text="${#temporals.format(selectFeed.board.getCreateDate(), 'MM월 dd일')}"></div>
                                    </div>
                                </div>
                                <div style="height: 10%">
                                    <div id="ModalCommentTextAreaDisable"
                                         th:classappend="${selectFeed.board.getCommentDisable() == true}?'visually-hidden'">
                                        <div id="boardID" th:text="${selectFeed.board.id}"
                                             style="display: none;"></div>

                                        <input type="hidden" id="commentID" name="commentID">
                                        <input type="hidden" id="recommentID" name="recommentID">
                                        <div class="d-flex m-2">
                                            <input id="isRecomment" type="hidden">
                                            <textarea class="form-control border-0 me-2 modal-textarea-content"
                                                      style="resize: none;" name="content"
                                                      id="modal-content"
                                                      placeholder="댓글 달기..."></textarea>
                                            <button type="button" style="width: 40px;"
                                                    class="btn noneBtn btn-link p-0"
                                                    onclick="clickCommentBtn()">게시
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Board Detail Modal End -->

    <!-- 작성자 Board Setting Modal -->
    <div class="modal fade" id="CreateUserBoardSettingModal" data-bs-backdrop="static" data-bs-keyboard="false"
         tabindex="-1" aria-labelledby="CreateUserBoardSettingModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div th:if="${selectFeed}">
                    <div class="modal-body p-0">
                        <div class="border-bottom text-center p-2">
                            <a th:href="@{|/beard/delete/${selectFeed.board.id}|}">
                                <button type="button" class="btn noneBtn btn-link text-danger">삭제</button>
                            </a>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button type="button" class="btn noneBtn btn-link text-primary"
                                    th:onclick="@{|ModifyBoard(${selectFeed.board.id})|}">수정
                            </button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button class="btn noneBtn btn-link text-dark" th:value="${selectFeed.board().id}"
                                    onclick="boardPinChange(this)"
                                    th:text="${selectFeed.board().isPin()}?'상단고정 해제':'상단고정'"></button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button class="btn noneBtn btn-link text-dark" th:value="${selectFeed.board().id}"
                                    onclick="boardKeep(this)">보관
                            </button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <a th:onclick="@{|likehide(${selectFeed.board.id})|}">
                                <button id="likehideBtn" type="button"
                                        th:if="${selectFeed.board.getLikeHide() == true}"
                                        class="btn noneBtn btn-link text-dark">좋아요 수 숨기기 취소
                                </button>
                                <button id="likehideBtn" type="button"
                                        th:if="${selectFeed.board.getLikeHide() == false}"
                                        class="btn noneBtn btn-link text-dark">좋아요 수 숨기기
                                </button>
                            </a>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <a th:onclick="@{|comment_disable(${selectFeed.board.id})|}">
                                <button id="commentDisableBtn" type="button"
                                        th:if="${selectFeed.board.getCommentDisable() == false}"
                                        class="btn noneBtn btn-link text-dark">댓글 비활성화
                                </button>
                                <button id="commentDisableBtn" type="button"
                                        th:if="${selectFeed.board.getCommentDisable() == true}"
                                        class="btn noneBtn btn-link text-dark">댓글 활성화
                                </button>
                            </a>
                        </div>
                        <div class="text-center p-2">
                            <button type="button" class="btn noneBtn btn-link text-dark" data-bs-dismiss="modal" onclick="reloadPage()">취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 작성자 Board Setting Modal End -->

    <!-- 사용자 Board Setting Modal -->
    <div class="modal fade" id="UserBoardSettingModal" data-bs-backdrop="static" data-bs-keyboard="false"
         tabindex="-1"
         aria-labelledby="UserBoardSettingModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div th:if="${selectFeed}">
                    <div class="modal-body p-0">
                        <div class="border-bottom text-center p-2">
                            <button class="btn noneBtn btn-link text-dark">즐겨찾기 추가</button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <a th:href="@{|/board/feedMemberInfo/${selectFeed.board.id}|}">
                                <button class="btn noneBtn btn-link text-dark">이 계정 정보</button>
                            </a>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button type="button" class="btn noneBtn btn-link text-dark" data-bs-dismiss="modal" onclick="reloadPage()">취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 사용자 Board Setting Modal End -->

    <input type="hidden" th:value="${scroll}" id="scroll">
    <input type="hidden" th:value="${referer}" id="referer">
    <input type="hidden" th:value="${loginMember.username}" id="loginMemberName">

    <form id="board-pin-form" th:action="@{|/board/pin|}" method="post">
        <input type="hidden" id="board" name="board">
    </form>

    <form id="board-keep-form" th:action="@{|/board/keep|}" method="post">
        <input type="hidden" id="keep" name="keep">
    </form>

    <script>

    function clickFollowSwapInUserPage(fetchPath) {

        var username = document.getElementById('username').value;
        var spin = document.getElementById('follow-spin');
        var texts = document.getElementsByClassName('follow-text');

        for(var i = 0; i < texts.length; i++)
        {
            texts.item(i).textContent='';
        }
        spin.classList.remove('visually-hidden');

        fetch(fetchPath + '/' + username)
            .then(response => response.json())
            .then(data => {
                setTimeout(reload,200);
            })
            .catch(error => console.error('데이터를 받지 못했습니다.', error));
    }

    // member/js/UserPage.js에서 clickFollow() 가져와 주석처리하고 위의 clickFollowSwapInUserPage()로 교체하였음 (아래는 기존 주현 코드)
    // function clickFollow()
    // {
    //     var username = document.getElementById('username').value;
    //     var spin = document.getElementById('follow-spin');
    //     var texts = document.getElementsByClassName('follow-text');
    //
    //     for(var i = 0; i < texts.length; i++)
    //     {
    //         texts.item(i).textContent='';
    //     }
    //     spin.classList.remove('visually-hidden');
    //
    //     debugger;
    //     fetch('/member/follow/'+username)
    //         .then(response => {
    //             return response.json()
    //         })
    //         .then(data => {
    //             setTimeout(reload,200);
    //         })
    //         .catch(error => console.error('데이터를 받지 못했습니다.',error));
    // }

    </script>

    <script th:src="@{/member/js/UserPage.js}"></script>
    <script th:src="@{/board/js/board.js}"></script>

</div>
</html>
