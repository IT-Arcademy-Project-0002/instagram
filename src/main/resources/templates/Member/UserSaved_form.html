<html layout:decorate="~{Layout/layout_main}">
<head>
    <title>User Page</title>
</head>
<div layout:fragment="content">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <input type="hidden" th:name="_csrf_header" th:value="${_csrf.headerName}"/>
    <div class="d-flex">
        <div class="main-content d-flex justify-content-center">
            <div th:if="${blocked}" class="text-center" style="padding: 40px">
                <div style="font-size: 24px; font-weight: bold; margin-top: 40px">
                    죄송합니다. 페이지를 사용할 수 없습니다.
                </div>
                <div style="font-size: 16px; margin-top: 40px">
                    클릭하신 링크가 잘못되었거나 페이지가 삭제되었습니다.
                    <a href="/main"> Instagram으로 돌아가기.</a>
                </div>
            </div>
            <!--mypage content-->
            <div th:if="${!blocked}" class="userPage_content">
                <!--mypage content inner-->
                <div class="userPage_content_inner">
                    <!--header-->
                    <div class="user_header">
                        <!--user photo-->
                        <div class="user_photo">
                            <div class="d-flex h-100 justify-content-center align-items-center">
                                <button th:if="${member.username == loginMember.username}"
                                        class="btn btn-light rounded-circle userProfile_btn"
                                        data-bs-toggle="modal" data-bs-target="#ProfilePhotoModifyModal">
                                    <img th:if="${member.image == null}" id="none_user_img"
                                         src="/files/designImg/noneuser.png"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                    <img th:unless="${member.image == null}" id="user_img"
                                         th:src="@{|/resources/${member.image.name}|}"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                </button>

                                <div th:unless="${member.username == loginMember.username}"
                                     class="btn-light rounded-circle userProfile_btn">
                                    <img th:if="${member.image == null}"
                                         src="/files/designImg/noneuser.png"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                    <img th:unless="${member.image == null}"
                                         th:src="@{|/resources/${member.image.name}|}"
                                         class="rounded-circle text-center smooth-update userProfile_img">
                                </div>

                                <!-- profile photo change modal -->
                                <div class="modal fade" id="ProfilePhotoModifyModal" tabindex="-1"
                                     aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered center">
                                        <div class="modal-content w400 bn">

                                            <div class="center">
                                                <div class="center"></div>
                                                <div class="w-100 h50 center fs20 mg16 fwb">
                                                    프로필 사진 변경
                                                </div>
                                            </div>
                                            <div class="bbsS bbw1 bbcDB w400"></div>

                                            <div class="modal-body p-0">
                                                <div class="btn-group-vertical w-100" role="group"
                                                     aria-label="Vertical button group">
                                                    <form th:action="@{|/member/profile/upload|}" method="post"
                                                          id="img-form" enctype="multipart/form-data">
                                                        <input type="file" accept="image/*" class="visually-hidden"
                                                               id="profile-photo-input"
                                                               name="profile-photo-input" onchange="readFile(this);">
                                                    </form>
                                                    <form th:action="@{|/member/profile/delete|}" method="post"
                                                          id="img-delete-form"></form>
                                                    <button type="button"
                                                            class="btn w-100 h50 center hfwb afwb pdT4 pdB4 pdL8 pdR8 fs14 fcBlue hfcBlue bn"
                                                            onclick="clickProfilePhotoChange()">사진 업로드
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="submit" form="img-delete-form"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcRed fwb hfcRed hfwb bn">
                                                        현재 사진 삭제
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--user info-->
                        <div class="userInfo">
                            <!--user info header-->
                            <div class="userInfo_header">
                                <div class="d-flex align-items-center h-100 pt-2">
                                    <!-- user id -->
                                    <div>
                                        <input type="hidden" id="page-username" th:value="${member.username}">
                                        <h5 th:text="${member.username}" class="userID"></h5>
                                    </div>
                                    <!-- mine page -->
                                    <div th:if="${userPageDTO.isMine()}" class="d-flex align-items-center">
                                        <!-- button -->
                                        <div class="btn_area">
                                            <a class="btn btn_userInfo bn" th:href="@{/member/account/edit}">프로필 편집</a>
                                            <a class="btn btn_userInfo mgL8 bn">보관된 스토리 보기</a>
                                        </div>

                                        <!-- my page setting -->
                                        <a class="cp hcb" type="button" data-bs-toggle="modal"
                                           data-bs-target="#myPageSettingModal">
                                            <div class="setting center hfcBlack">
                                                <svg aria-label="옵션" stroke="currentColor" fill="currentColor"
                                                     height="24" role="img" viewBox="0 0 24 24" width="24"><title>
                                                    옵션</title>
                                                    <circle cx="12" cy="12" fill="none" r="8.635" stroke="currentColor"
                                                            stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2"></circle>
                                                    <path d="M14.232 3.656a1.269 1.269 0 0 1-.796-.66L12.93 2h-1.86l-.505.996a1.269 1.269 0 0 1-.796.66m-.001 16.688a1.269 1.269 0 0 1 .796.66l.505.996h1.862l.505-.996a1.269 1.269 0 0 1 .796-.66M3.656 9.768a1.269 1.269 0 0 1-.66.796L2 11.07v1.862l.996.505a1.269 1.269 0 0 1 .66.796m16.688-.001a1.269 1.269 0 0 1 .66-.796L22 12.93v-1.86l-.996-.505a1.269 1.269 0 0 1-.66-.796M7.678 4.522a1.269 1.269 0 0 1-1.03.096l-1.06-.348L4.27 5.587l.348 1.062a1.269 1.269 0 0 1-.096 1.03m11.8 11.799a1.269 1.269 0 0 1 1.03-.096l1.06.348 1.318-1.317-.348-1.062a1.269 1.269 0 0 1 .096-1.03m-14.956.001a1.269 1.269 0 0 1 .096 1.03l-.348 1.06 1.317 1.318 1.062-.348a1.269 1.269 0 0 1 1.03.096m11.799-11.8a1.269 1.269 0 0 1-.096-1.03l.348-1.06-1.317-1.318-1.062.348a1.269 1.269 0 0 1-1.03-.096"
                                                          fill="none" stroke="currentColor" stroke-linejoin="round"
                                                          stroke-width="2"></path>
                                                </svg>
                                            </div>
                                        </a>
                                    </div>

                                    <!-- my page setting Modal -->
                                    <div class="modal fade" id="myPageSettingModal" tabindex="-1"
                                         aria-labelledby="myPageSettingModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered center">

                                            <div class="modal-content w400 bn">
                                                <a href="/member/account/notice" type="button"
                                                   class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 알림 </a>

                                                <div class="btsS btw1 btcDB w400"></div>
                                                <a href="/member/account/who_can_see_your_content/" type="button"
                                                   class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 설정 및
                                                    개인정보 </a>

                                                <div class="btsS btw1 btcDB w400"></div>
                                                <a href="/member/logout"
                                                   class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 로그아웃 </a>

                                                <div class="btsS btw1 btcDB w400"></div>
                                                <button type="button" data-bs-dismiss="modal"
                                                        class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14"> 취소
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- not mine page-->
                                    <div th:unless="${userPageDTO.isMine()}" class="d-flex align-items-center">
                                        <!-- button -->
                                        <div class="d-flex mgL20" th:if="${!blocking}">
                                            <a class="btn mw74 center"
                                               th:classappend="${userPageDTO.isFollow() or userPageDTO.isRequestFollow()}?'btn_following' : 'btn_follow'"
                                               th:attr="onclick=|clickFollowSwapInUserPage('${userPageDTO.isFollow() ? '/member/follow/delete' : '/member/follow'}')|">

                                                <span id="follow-spin"
                                                      class="visually-hidden spinner-border spinner-border-sm"
                                                      aria-hidden="true"></span>

                                                <span th:if="${userPageDTO.isFollow()}" class="follow-text fs14 fwb bn">팔로잉</span>

                                                <span th:if="${not userPageDTO.isFollow() and userPageDTO.isFollower() and not userPageDTO.isRequestFollow()}"
                                                      class="follow-text fs14 fwb bn">맞팔로우 하기</span>

                                                <span th:if="${userPageDTO.isRequestFollow()}"
                                                      class="follow-text fs14 fwb bn">요청됨</span>

                                                <span th:if="${not userPageDTO.isRequestFollow() and not userPageDTO.isFollow() and not userPageDTO.isFollower()}"
                                                      class="follow-text fs14 fwb bn">팔로우</span>
                                            </a>
                                            <a th:if="${not userPageDTO.isFollower() or userPageDTO.isFollow()}"
                                               class="btn btn_message mgL8 bn">메세지 보내기</a>
                                        </div>

                                        <div class="d-flex mgL20" th:if="${blocking}">
                                            <a class="btn mw74 center btn_follow"
                                               data-bs-target="#userBlockCancelModal" data-bs-toggle="modal">

                                                <span id="block-spin"
                                                      class="visually-hidden spinner-border spinner-border-sm"
                                                      aria-hidden="true"></span>
                                                <span class="follow-text fs14 fwb bn">차단 해제</span>
                                            </a>
                                        </div>

                                        <!-- user page setting -->
                                        <a class="cp hcb" type="button" data-bs-toggle="modal"
                                           data-bs-target="#userPageSettingModal">
                                            <div class="mgL5">
                                                <div class="pd8 wa hfcBlack">
                                                    <svg aria-label="옵션" fill="currentColor" height="32" role="img"
                                                         viewBox="0 0 24 24" width="32"><title>옵션</title>
                                                        <circle cx="12" cy="12" r="1.5"></circle>
                                                        <circle cx="6" cy="12" r="1.5"></circle>
                                                        <circle cx="18" cy="12" r="1.5"></circle>
                                                    </svg>
                                                </div>
                                            </div>
                                        </a>

                                        <!-- user page setting Modal -->
                                        <div class="modal fade" id="userPageSettingModal" tabindex="-1"
                                             aria-labelledby="userPageSettingModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered center">
                                                <div class="modal-content w400 bn">

                                                    <button th:if="${!blocking}"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcRed fcRed fwb bn"
                                                            data-bs-target="#userBlockModal" data-bs-toggle="modal">
                                                        차단
                                                    </button>

                                                    <button th:if="${blocking}"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcRed fcRed fwb bn"
                                                            data-bs-target="#userBlockCancelModal"
                                                            data-bs-toggle="modal">
                                                        차단 해제
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- user block modal -->
                                        <div class="modal fade" id="userBlockModal" tabindex="-1"
                                             aria-labelledby="userBlockModalToggleLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered center">
                                                <div class="modal-content w400 bn">
                                                    <div class="center">
                                                        <div class="w-100 h-100 center mg32 fs14 fcGray"
                                                             id="userBlockModalToggleLabel">
                                                            <div class="text-center">
                                                                <span class="pdB16 fs20 fw600 fcBlack"
                                                                      th:text="@{|${member.username}님을 차단하시겠어요?|}"></span>
                                                                <br>상대방은 Instagram에서 회원님의 프로필, 게시물 및 <br>
                                                                스토리를 찾을 수 없게 됩니다. Instagram은 회원님이 <br>
                                                                차단한 사실을 상대방에게 알리지 않습니다.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button onclick="clickBlock()"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 hfcRed fcRed fwb bn">
                                                        차단
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="modal fade" id="userBlockCancelModal" tabindex="-1"
                                             aria-labelledby="userBlockModalToggleLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered center">
                                                <div class="modal-content w400 bn">
                                                    <div class="center">
                                                        <div class="w-100 h-100 center mg32 fs14 fcGray"
                                                             id="userBlockCancelModalToggleLabel">
                                                            <div class="text-center">
                                                                <span class="pdB16 fs20 fw600 fcBlack"
                                                                      th:text="@{|${member.username}님을 차단 해제하시겠어요?|}"></span>
                                                                <br>이제 상대방은 Instagram에서 회원님의 게시물을 보고 회원님을 팔로우할 수 있습니다.
                                                                Instagram은 회원님이 차단을 해제한 사실을 상대방에게 알리지 않습니다.
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button onclick="clickBlockCancel()"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 hfcRed fcRed fwb bn">
                                                        차단 해제
                                                    </button>

                                                    <div class="btsS btw1 btcDB w400"></div>
                                                    <button type="button" data-bs-dismiss="modal"
                                                            class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn">
                                                        취소
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--user follow info-->
                            <div class="d-flex user_follow_info aIC">
                                <div class="me-5">
                                    <span>게시물</span>
                                    <span class="fw600" th:text="${userPageDTO.feedSize}"></span>
                                </div>
                                <div class="me-5">
                                    <span>팔로워</span>
                                    <span class="fw600" id="followers"
                                          th:text="${#lists.size(userPageDTO.followers)}"></span>
                                </div>
                                <div>
                                    <span>팔로잉</span>
                                    <span class="fw600" id="follows"
                                          th:text="${#lists.size(userPageDTO.followings)}"></span>
                                </div>
                            </div>

                            <!--user info interest-->
                            <div class="d-flex flex-column justify-content-between mh30 h30">
                                <div class="fs14 fw-bold pdT5">
                                    <span th:text="${member.nickname}"></span>
                                </div>
                                <div class="fs14 pdT5 mgB0">
                                    <span th:text="${member.introduction}"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div th:if="${!blocking}">
                        <!--story highlight --> <!-- 'visually-hidden' -->
                        <div class="h130 mgB44" th:classappend="${#maps.isEmpty(userPageDTO.stories)} ? ''">
                            <div class="h_100">
                                <div class="d-flex h_100">
                                    <div class="mgL24">
                                        <div class="w115 pdT10 pdR15 pdB10 pdL15">
                                            <a type="button" data-bs-toggle="modal" data-bs-target="#highlightModal">
                                                <div>
                                                    <div>
                                                        <div class="highlight_line center">
                                                            <div class="d-flex highlight_line_internal">
                                                                <svg aria-label="+ 아이콘" class="highlight_icon"
                                                                     fill="currentColor" height="44"
                                                                     role="img" viewBox="0 0 24 24" width="44"><title>+
                                                                    아이콘</title>
                                                                    <path d="M21 11.3h-8.2V3c0-.4-.3-.8-.8-.8s-.8.4-.8.8v8.2H3c-.4 0-.8.3-.8.8s.3.8.8.8h8.2V21c0 .4.3.8.8.8s.8-.3.8-.8v-8.2H21c.4 0 .8-.3.8-.8s-.4-.7-.8-.7z"></path>
                                                                </svg>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="pdT10">
                                                        <div class="new_text">
                                                            신규
                                                        </div>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- highlight modal -->
                        <div class="modal fade" id="highlightModal" tabindex="-1"
                             aria-labelledby="highlightModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered center">
                                <div class="modal-content w400 bn">

                                    <div class="center">
                                        <div class="center fb48"></div>
                                        <div class="w-100 h50 center pdT4 pdB4 pdL8 pdR8 fs16 fwb"
                                             id="highlightModalLabel">
                                            새로운 하이라이트
                                        </div>
                                        <div class="center fb48">
                                            <button type="button" class="btn-close pd8 fwb bn"
                                                    data-bs-dismiss="modal" aria-label="Close">
                                            </button>
                                        </div>
                                    </div>
                                    <div class="bbsS bbw1 bbcDB w400"></div>

                                    <div class="mg20">
                                        <label class="d-flex justify-content-center">
                                            <input type="text" name="highlightname" id="highlightname"
                                                   class="highlight_input" placeholder="하이라이트 이름">
                                        </label>
                                    </div>

                                    <div class="btsS btw1 btcDB w400"></div>
                                    <button class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn"
                                            data-bs-target="#highlightListModal" data-bs-toggle="modal"> 다음
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- highlight list modal -->
                        <div class="modal fade" id="highlightListModal" tabindex="-1"
                             aria-labelledby="highlightListModalToggleLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered center">
                                <div class="modal-content w400 bn">
                                    <div class="center">

                                        <div class="center fb48">
                                            <button type="button" class="btn_back pd8 fwb"
                                                    data-bs-target="#highlightModal"
                                                    data-bs-toggle="modal">
                                                <svg aria-label="돌아가기" class="" fill="currentColor" height="21"
                                                     role="img"
                                                     viewBox="0 0 24 24" width="21"><title>돌아가기</title>
                                                    <path d="M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z"
                                                          transform="rotate(-90 12 12)"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="w-100 h50 center pdT4 pdB4 pdL8 pdR8 fs16 fwb"
                                             id="highlightListModalToggleLabel"> 스토리 목록
                                        </div>

                                        <div class="center fb48">
                                            <button type="button" class="btn-close pd8 fwb bn"
                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                    </div>
                                    <div class="bbsS bbw1 bbcDB w400"></div>

                                    <div class="modal-body h600 center">
                                        스토리 리스트 수정 중
                                    </div>

                                    <div class="btsS btw1 btcDB w400"></div>
                                    <button class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 bn"
                                            data-bs-target="#storyCoverChoiceModal" data-bs-toggle="modal"> 다음
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- story cover choice -->
                        <div class="modal fade" id="storyCoverChoiceModal" tabindex="-1"
                             aria-labelledby="storyCoverChoiceModalToggleLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered center">
                                <div class="modal-content w400 bn">
                                    <div class="center">

                                        <div class="center fb48">
                                            <button type="button" class="btn_back pd8 fwb"
                                                    data-bs-target="#highlightListModal" data-bs-toggle="modal">
                                                <svg aria-label="돌아가기" class="" fill="currentColor" height="21"
                                                     role="img"
                                                     viewBox="0 0 24 24" width="21"><title>돌아가기</title>
                                                    <path d="M21 17.502a.997.997 0 0 1-.707-.293L12 8.913l-8.293 8.296a1 1 0 1 1-1.414-1.414l9-9.004a1.03 1.03 0 0 1 1.414 0l9 9.004A1 1 0 0 1 21 17.502Z"
                                                          transform="rotate(-90 12 12)"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <div class="w-100 h50 center pdT4 pdB4 pdL8 pdR8 fs16 fwb"
                                             id="highlightListModalToggleLabel3"> 커버 선택
                                        </div>

                                        <div class="center fb48">
                                            <button type="button" class="btn-close pd8 fwb bn"
                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                    </div>
                                    <div class="bbsS bbw1 bbcDB w400"></div>

                                    <div class="modal-body h600 center">
                                        커버 선택 수정 중
                                    </div>

                                    <div class="btsS btw1 btcDB w400"></div>
                                    <button class="btn w-100 h50 center hfwb pdT4 pdB4 pdL8 pdR8 fs14 fcBlue hfcBlue bn"
                                            data-bs-dismiss="modal"> 완료
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="btsS btcDB btw1"></div>

                        <div th:if="${member.scope or userPageDTO.isMine()}">
                            <!--board list menu-->
                            <div class="d-flex justify-content-center align-items-center h53">
                                <div class="d-flex">
                                    <div class="center h54 mgR60 hfcBlack">
                                        <a class="center btn pd0 mgL6 fs12 fwb fcGray bn hfcBlack" th:href="@{|/member/page/${member.username}|}">
                                            <svg aria-label="" fill="currentColor" height="12" role="img"
                                                 viewBox="0 0 24 24" width="12"><title></title>
                                                <rect fill="none" height="18" stroke="currentColor"
                                                      stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" width="18" x="3"
                                                      y="3"></rect>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="9.015" x2="9.015"
                                                      y1="3"
                                                      y2="21"></line>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="14.985" x2="14.985"
                                                      y1="3" y2="21"></line>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="21" x2="3" y1="9.015"
                                                      y2="9.015"></line>
                                                <line fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2" x1="21" x2="3"
                                                      y1="14.985"
                                                      y2="14.985"></line>
                                            </svg>
                                            <div class="mgL6">게시물</div>

                                        </a>
                                    </div>

                                    <div th:if="${member.username == loginMember.username}" class="center h54 mgR60 border-top border-dark">
                                        <a class="center btn pd0 mgL6 fs12 fwb fcGray bn hfcBlack" href="">
                                            <svg aria-label="" fill="currentColor" height="12" role="img"
                                                 viewBox="0 0 24 24" width="12"><title></title>
                                                <polygon fill="none" points="20 21 12 13.44 4 21 4 3 20 3 20 21"
                                                         stroke="currentColor" stroke-linecap="round"
                                                         stroke-linejoin="round" stroke-width="2"></polygon>
                                            </svg>
                                            <div class="mgL6"> 저장됨</div>
                                        </a>
                                    </div>

                                    <div class="center h54">
                                        <a class="center btn pd0 mgL6 fs12 fwb fcGray bn hfcBlack"
                                           th:href="@{|/member/page/${member.username}/tagged|}">
                                            <svg aria-label="" fill="currentColor" height="12" role="img"
                                                 viewBox="0 0 24 24" width="12"><title></title>
                                                <path d="M10.201 3.797 12 1.997l1.799 1.8a1.59 1.59 0 0 0 1.124.465h5.259A1.818 1.818 0 0 1 22 6.08v14.104a1.818 1.818 0 0 1-1.818 1.818H3.818A1.818 1.818 0 0 1 2 20.184V6.08a1.818 1.818 0 0 1 1.818-1.818h5.26a1.59 1.59 0 0 0 1.123-.465Z"
                                                      fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2"></path>
                                                <path d="M18.598 22.002V21.4a3.949 3.949 0 0 0-3.948-3.949H9.495A3.949 3.949 0 0 0 5.546 21.4v.603"
                                                      fill="none" stroke="currentColor" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2"></path>
                                                <circle cx="12.072" cy="11.075" fill="none" r="3.556"
                                                        stroke="currentColor"
                                                        stroke-linecap="round" stroke-linejoin="round"
                                                        stroke-width="2"></circle>
                                            </svg>
                                            <div class="mgL6"> 태그됨</div>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="h64 d-flex">
                                <div class="flex-fill"
                                        style="color: #737373; font-size: 12px; padding-top: 32px; padding-bottom: 16px">
                                    저장한 내용은 회원님만 볼 수 있습니다.
                                </div>
                                <a style="color: #0095f6; font-size: 14px; padding-top: 31px; font-weight: bold"
                                   data-bs-toggle="modal" data-bs-target="#collectionModal">
                                    + 새 컬렉션
                                </a>
                            </div>
                            <!--board list-->
                            <div style="height: calc(100vh - 497px);">
                                <div class="row row-cols-3 mx-0 p-0">
                                    <div th:each="savedMap : ${savedBoardDTO.getSavedGroupFiles()}"
                                         th:if="${savedMap.getKey().id == null}"
                                         class="col mb-1 p-0">
                                        <div class="d-flex justify-content-center">
                                            <div class="w300 h300 row row-cols-2 mx-0 p-0"
                                                 style="background: #efefef;"
                                                 type="button"
                                                 th:onclick="${savedMap.getKey().id}">
                                                <div th:each="file :${savedMap.getValue()}"
                                                        class="pr col p-0 userProfile_line" style="width: 150px; height: 150px;">
                                                    <img th:src="@{|/resources/${file.name}|}"
                                                         class="shadow-sm text-center smooth-update pa top0 left0 w-100 h_100 mga ofc"
                                                         style="transform: translate(50,50)">
                                                </div>
                                            </div>

                                            <div class="position-absolute w300 h300 d-flex align-items-end saved-group">
                                                <div th:text="${savedMap.getKey().name}"
                                                    style="color: #ffff; font-size: 20px; padding: 20px">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:each="savedMap : ${savedBoardDTO.getSavedGroupFiles()}"
                                         th:unless="${savedMap.getKey().id == null}" class="col mb-1 p-0">
                                        <div class="d-flex justify-content-center">
                                            <div class="pr w300 h300" type="button"
                                                 style="background: #efefef;"
                                                 th:onclick="${savedMap.getKey().id}">
                                                <div th:each="file :${savedMap.getValue()}"
                                                     class="p-0 userProfile_line" style="width: 300px; height: 300px;">
                                                    <img th:src="@{|/resources/${file.name}|}"
                                                         class="shadow-sm text-center smooth-update pa top0 left0 w-100 h_100 mga ofc"
                                                         style="transform: translate(50,50)">
                                                </div>
                                            </div>

                                            <div class="position-absolute w300 h300 d-flex align-items-end saved-group">
                                                <div th:text="${savedMap.getKey().name}"
                                                     style="color: #ffff; font-size: 20px; padding: 20px">

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div th:unless="${member.scope or userPageDTO.isMine()}">
                        <div class="bdb border-1 pd40" style="border-top: none !important;">
                            <div class="text-center fs14">
                                비공개 계정입니다
                                <br>
                                <br>
                                사진 및 동영상을 보려면 팔로우하세요.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- 작성자 Board Setting Modal -->
    <div class="modal fade" id="CreateUserBoardSettingModal" data-bs-backdrop="static" data-bs-keyboard="false"
         tabindex="-1" aria-labelledby="CreateUserBoardSettingModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div th:if="${selectFeed}">
                    <div class="modal-body p-0">
                        <div class="border-bottom text-center p-2">
                            <a th:href="@{|/beard/delete/${selectFeed.board.id}|}">
                                <button type="button" class="btn noneBtn btn-link text-danger">삭제</button>
                            </a>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button type="button" class="btn noneBtn btn-link text-primary"
                                    th:onclick="@{|ModifyBoard(${selectFeed.board.id})|}">수정
                            </button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button class="btn noneBtn btn-link text-dark" th:value="${selectFeed.board().id}"
                                    onclick="boardPinChange(this)"
                                    th:text="${selectFeed.board().isPin()}?'상단고정 해제':'상단고정'"></button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button class="btn noneBtn btn-link text-dark" th:value="${selectFeed.board().id}"
                                    onclick="boardKeep(this)">보관
                            </button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <a th:onclick="@{|likehide(${selectFeed.board.id})|}">
                                <button id="likehideBtn" type="button"
                                        th:if="${selectFeed.board.getLikeHide() == true}"
                                        class="btn noneBtn btn-link text-dark">좋아요 수 숨기기 취소
                                </button>
                                <button id="likehideBtn" type="button"
                                        th:if="${selectFeed.board.getLikeHide() == false}"
                                        class="btn noneBtn btn-link text-dark">좋아요 수 숨기기
                                </button>
                            </a>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <a th:onclick="@{|comment_disable(${selectFeed.board.id})|}">
                                <button id="commentDisableBtn" type="button"
                                        th:if="${selectFeed.board.getCommentDisable() == false}"
                                        class="btn noneBtn btn-link text-dark">댓글 비활성화
                                </button>
                                <button id="commentDisableBtn" type="button"
                                        th:if="${selectFeed.board.getCommentDisable() == true}"
                                        class="btn noneBtn btn-link text-dark">댓글 활성화
                                </button>
                            </a>
                        </div>
                        <div class="text-center p-2">
                            <button type="button" class="btn noneBtn btn-link text-dark" data-bs-dismiss="modal"
                                    onclick="reloadPage()">취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 작성자 Board Setting Modal End -->

    <!-- 사용자 Board Setting Modal -->
    <div class="modal fade" id="UserBoardSettingModal" data-bs-backdrop="static" data-bs-keyboard="false"
         tabindex="-1"
         aria-labelledby="UserBoardSettingModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div th:if="${selectFeed}">
                    <div class="modal-body p-0">
                        <div class="border-bottom text-center p-2">
                            <button class="btn noneBtn btn-link text-dark">즐겨찾기 추가</button>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <a th:href="@{|/board/feedMemberInfo/${selectFeed.board.id}|}">
                                <button class="btn noneBtn btn-link text-dark">이 계정 정보</button>
                            </a>
                        </div>
                        <div class="border-bottom text-center p-2">
                            <button type="button" class="btn noneBtn btn-link text-dark" data-bs-dismiss="modal"
                                    onclick="reloadPage()">취소
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 사용자 Board Setting Modal End -->

    <input type="hidden" th:value="${scroll}" id="scroll">
    <input type="hidden" th:value="${referer}" id="referer">
    <input type="hidden" th:value="${loginMember.username}" id="loginMemberName">

    <form id="board-pin-form" th:action="@{|/board/pin|}" method="post">
        <input type="hidden" id="board" name="board">
    </form>

    <form id="board-keep-form" th:action="@{|/board/keep|}" method="post">
        <input type="hidden" id="keep" name="keep">
    </form>

    <!-- collectionModal -->
    <div class="modal fade" id="collectionModal" tabindex="-1"
         aria-labelledby="collectionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="collectionModalLabel">새 컬렉션</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex flex-column justify-content-center align-items-center"
                     style="width: 100%; height: 100%;">
                    <div class="file-container">
                    </div>
                    <div class="input-group" style="width: 100%; margin-top: 20px;">
                        <input type="text" class="form-control" id="GroupName"
                               name="GroupName">
                    </div>
                    <input id="fileId" type="hidden">
                </div>
                <div class="modal-footer d-flex justify-content-center p-0"
                     style="width: 100%;">
                    <button type="button" class="btn noneBtn btn-link"
                            onclick="SaveGroupCreate()">저장
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- collectionModal End -->

    <script>

        function clickFollowSwapInUserPage(fetchPath) {

            var username = document.getElementById('username').value;
            var spin = document.getElementById('follow-spin');
            var texts = document.getElementsByClassName('follow-text');

            for (var i = 0; i < texts.length; i++) {
                texts.item(i).textContent = '';
            }
            spin.classList.remove('visually-hidden');

            fetch(fetchPath + '/' + username)
                .then(response => response.json())
                .then(data => {
                    setTimeout(reload, 200);
                })
                .catch(error => console.error('데이터를 받지 못했습니다.', error));
        }

        // member/js/UserPage.js에서 clickFollow() 가져와 주석처리하고 위의 clickFollowSwapInUserPage()로 교체하였음 (아래는 기존 주현 코드)
        // function clickFollow()
        // {
        //     var username = document.getElementById('username').value;
        //     var spin = document.getElementById('follow-spin');
        //     var texts = document.getElementsByClassName('follow-text');
        //
        //     for(var i = 0; i < texts.length; i++)
        //     {
        //         texts.item(i).textContent='';
        //     }
        //     spin.classList.remove('visually-hidden');
        //
        //     debugger;
        //     fetch('/member/follow/'+username)
        //         .then(response => {
        //             return response.json()
        //         })
        //         .then(data => {
        //             setTimeout(reload,200);
        //         })
        //         .catch(error => console.error('데이터를 받지 못했습니다.',error));
        // }

    </script>

    <script th:src="@{/member/js/UserPage.js}"></script>
    <script th:src="@{/board/js/board.js}"></script>

</div>
</html>
